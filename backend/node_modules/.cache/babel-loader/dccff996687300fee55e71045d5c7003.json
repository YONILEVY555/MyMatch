{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yonil\\\\my-app\\\\src\\\\pages\\\\find_friends\\\\FindFriends.jsx\";\nimport React, { Component } from 'react';\nimport { Image, Button } from \"react-bootstrap\";\nimport SubNavbar from \"@components/SubNavbar.js\";\nimport UserDataService from \"@api/user/UserDataService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass FindFriends extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = async event => {\n      var requestParam = {\n        params: {\n          type: 'F'\n        }\n      };\n\n      try {\n        const searchResult = await UserDataService.retrieveUser(event.target.value);\n        const relationShip = await UserDataService.getRelationship(id, searchResult.data.id, requestParam);\n        const state = this.getStateRelationShip(relationShip);\n        const always = {\n          [event.target.name]: event.target.value,\n          searchResult: searchResult.data,\n          showResult: true,\n          imageResult: searchResult.data.image[0].content,\n          idResult: searchResult.data.id,\n          usernameResult: searchResult.data.username\n        };\n        if (state.equals(\"NOT EXIST\")) this.setState({\n          always,\n          isNotExist: true\n        });\n        if (state.equals(\"ALREADY SUBMITTED A REQUEST\")) this.setState({\n          always,\n          isRequestSubmitted: true\n        });\n        if (state.equals(\"ALREADY SENT A REQUEST\")) this.setState({\n          always,\n          isRequestSent: true\n        });\n      } catch {\n        this.setState({\n          [event.target.name]: event.target.value,\n          showResult: false\n        });\n      }\n    };\n\n    this.AddFriend = async friendId => {\n      var requestParam = {\n        params: {\n          userId: Number(this.state.id),\n          otherId: friendId,\n          type: 'FRIEND',\n          status: 'ACTIVE'\n        }\n      };\n      this.setState({\n        isRequestSent: true\n      }); //await UserDataService.updateRelationship(this.state.id,requestParam);\n    };\n\n    this.getStateRelationShip = relationShip => {\n      if (relationShip == null) return \"NOT EXIST\";\n\n      if (relationShip.status.equals(\"STANDBY\")) {\n        if (relationShip.source.id == this.state.id) {\n          return \"ALREADY SUBMITTED A REQUEST\";\n        } else {\n          return \"ALREADY SENT A REQUEST\";\n        }\n      } else return \"ALREADY FRIENDS\";\n    };\n\n    this.cancelRequest = () => {};\n\n    this.state = {\n      id: AuthenticationService.getLoggedInUserId(),\n      search: '',\n      searchResult: null,\n      showResult: false,\n      imageResult: '',\n      idResult: '',\n      usernameResult: '',\n      isNotExist: false,\n      isRequestSent: false,\n      isRequestSubmitted: false,\n      isAlreadyFriend: false\n    };\n  }\n\n  render() {\n    const title = \"Find new friends\";\n    const btnText = \"My friends\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(SubNavbar, {\n        handleChange: this.handleChange,\n        valSerach: this.state.valSerach,\n        btnText: btnText,\n        title: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }, this), this.state.showResult && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-50 mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(Image, {\n          src: `data:image/jpeg;base64,${this.state.imageResult}`,\n          className: \" size-image-find-Friends mt-3 mb-3 d-block mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 50\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" w-25 mx-auto\",\n          children: this.state.usernameResult\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 50\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" w-25  mx-auto\",\n          children: [this.state.isRequestSent == false && /*#__PURE__*/_jsxDEV(Button, {\n            onClick: e => this.AddFriend(e.target.id),\n            id: this.state.idResult,\n            className: \" w-100 c1 mt-4  mx-auto\",\n            children: \"Add Friend\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 97\n          }, this), this.state.isRequestSent && /*#__PURE__*/_jsxDEV(\"p\", {\n            class: \"text-muted mx-auto mt-4\",\n            children: \"Request sent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 85\n          }, this), this.state.isRequestSent && /*#__PURE__*/_jsxDEV(Button, {\n            onClick: e => this.cancelRequest(e.target.id),\n            id: this.state.idResult,\n            className: \"btn btn-secondary w-100 c1 mx-auto\",\n            children: \"Cancel request\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 86\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 50\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 51\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default FindFriends;","map":{"version":3,"sources":["C:/Users/yonil/my-app/src/pages/find_friends/FindFriends.jsx"],"names":["React","Component","Image","Button","SubNavbar","UserDataService","FindFriends","constructor","props","handleChange","event","requestParam","params","type","searchResult","retrieveUser","target","value","relationShip","getRelationship","id","data","state","getStateRelationShip","always","name","showResult","imageResult","image","content","idResult","usernameResult","username","equals","setState","isNotExist","isRequestSubmitted","isRequestSent","AddFriend","friendId","userId","Number","otherId","status","source","cancelRequest","AuthenticationService","getLoggedInUserId","search","isAlreadyFriend","render","title","btnText","valSerach","e"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport {Image, Button} from \"react-bootstrap\"\r\nimport SubNavbar from \"@components/SubNavbar.js\";\r\nimport UserDataService from \"@api/user/UserDataService\";\r\n\r\nclass FindFriends extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n        this.state = {\r\n           id: AuthenticationService.getLoggedInUserId(),\r\n           search: '',\r\n           searchResult: null,\r\n           showResult: false,\r\n           imageResult: '',\r\n           idResult: '',\r\n           usernameResult: '',\r\n           isNotExist: false, \r\n           isRequestSent: false,\r\n           isRequestSubmitted: false,\r\n           isAlreadyFriend: false\r\n        }\r\n  }\r\n\r\n  handleChange = async (event) => {\r\n\r\n    var requestParam = {\r\n      params: {\r\n          type: 'F' ,\r\n      }\r\n    }\r\n\r\n    try{\r\n\r\n    const searchResult = await UserDataService.retrieveUser(event.target.value)\r\n\r\n    const relationShip = await UserDataService.getRelationship(id ,searchResult.data.id,requestParam)\r\n    \r\n    const state = this.getStateRelationShip(relationShip)\r\n\r\n    const always = { [event.target.name] : event.target.value,\r\n                     searchResult : searchResult.data,\r\n                     showResult: true,\r\n                     imageResult: searchResult.data.image[0].content,\r\n                     idResult: searchResult.data.id,\r\n                     usernameResult: searchResult.data.username} \r\n\r\n                     \r\n     if( state.equals(\"NOT EXIST\") )\r\n      this.setState({\r\n          always,\r\n          isNotExist: true\r\n      })\r\n    \r\n     if( state.equals(\"ALREADY SUBMITTED A REQUEST\") )\r\n      this.setState({\r\n          always,\r\n          isRequestSubmitted: true\r\n      })\r\n\r\n      if( state.equals(\"ALREADY SENT A REQUEST\") )\r\n      this.setState({\r\n          always,\r\n          isRequestSent: true\r\n      })\r\n  \r\n  }\r\n  catch{\r\n      this.setState({\r\n        [event.target.name] : event.target.value,\r\n        showResult: false\r\n      })\r\n  }\r\n\r\n  }\r\n\r\n  AddFriend = async (friendId) =>{\r\n\r\n    var requestParam = {\r\n      params: {\r\n          userId: Number(this.state.id) ,\r\n          otherId: friendId,\r\n          type: 'FRIEND' ,\r\n          status: 'ACTIVE' \r\n      }\r\n    }\r\n\r\n    this.setState(\r\n                    {isRequestSent: true}\r\n                 )\r\n                 \r\n  //await UserDataService.updateRelationship(this.state.id,requestParam);\r\n   \r\n  }\r\n\r\n  getStateRelationShip = (relationShip) =>{\r\n\r\n         if(relationShip==null)\r\n             return \"NOT EXIST\"\r\n          \r\n         if( relationShip.status.equals(\"STANDBY\") ){\r\n             if( relationShip.source.id == this.state.id){\r\n                return \"ALREADY SUBMITTED A REQUEST\"\r\n             }\r\n              else{\r\n                return \"ALREADY SENT A REQUEST\"\r\n              }      \r\n         }else\r\n              return \"ALREADY FRIENDS\"\r\n\r\n  }\r\n\r\n  cancelRequest = () =>{\r\n                            \r\n  }\r\n\r\n    render() {\r\n\r\n        const title = \"Find new friends\"\r\n        const btnText = \"My friends\"\r\n\r\n        return (\r\n\r\n            <div className=\"mx-auto\">\r\n\r\n                        <SubNavbar handleChange={this.handleChange} \r\n                                   valSerach={this.state.valSerach}\r\n                                   btnText={btnText}\r\n                                   title={title}/>\r\n\r\n                        {this.state.showResult && <div className='w-50 mx-auto'>\r\n\r\n                                                 <Image src={`data:image/jpeg;base64,${this.state.imageResult}`} \r\n                                                        className=\" size-image-find-Friends mt-3 mb-3 d-block mx-auto\" />  \r\n   \r\n                                                 <div className=' w-25 mx-auto'>{this.state.usernameResult}</div>\r\n   \r\n                                                 <div className=' w-25  mx-auto'>\r\n                                                      \r\n                                                       { (this.state.isRequestSent == false) && <Button onClick={e => this.AddFriend(e.target.id)}  \r\n                                                                                             id={this.state.idResult} \r\n                                                                                             className=' w-100 c1 mt-4  mx-auto'>Add Friend</Button>}\r\n\r\n                                                       {this.state.isRequestSent && <p class=\"text-muted mx-auto mt-4\">Request sent</p>}\r\n\r\n                                                       { this.state.isRequestSent && <Button onClick={e => this.cancelRequest(e.target.id)}  \r\n                                                                                             id={this.state.idResult} \r\n                                                                                             className='btn btn-secondary w-100 c1 mx-auto'>Cancel request</Button>}\r\n                                                 </div>\r\n\r\n                                            </div> }\r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default FindFriends"]},"metadata":{},"sourceType":"module"}