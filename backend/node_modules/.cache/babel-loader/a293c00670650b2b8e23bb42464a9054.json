{"ast":null,"code":"(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory(require(\"react\"), require(\"lodash\"), require(\"prop-types\"));else if (typeof define === 'function' && define.amd) define(\"reactXarrow\", [\"react\", \"lodash\", \"prop-types\"], factory);else if (typeof exports === 'object') exports[\"reactXarrow\"] = factory(require(\"react\"), require(\"lodash\"), require(\"prop-types\"));else root[\"reactXarrow\"] = factory(root[\"react\"], root[\"lodash\"], root[\"prop-types\"]);\n})(this, function (__WEBPACK_EXTERNAL_MODULE_react__, __WEBPACK_EXTERNAL_MODULE_lodash__, __WEBPACK_EXTERNAL_MODULE_prop_types__) {\n  return (\n    /******/\n    function () {\n      // webpackBootstrap\n\n      /******/\n      \"use strict\";\n      /******/\n\n      var __webpack_modules__ = {\n        /***/\n        \"./src/Xarrow/utils/buzzier.js\":\n        /*!*************************************!*\\\n          !*** ./src/Xarrow/utils/buzzier.js ***!\n          \\*************************************/\n\n        /***/\n        function (__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n          __webpack_require__.r(__webpack_exports__);\n          /* harmony export */\n\n\n          __webpack_require__.d(__webpack_exports__, {\n            /* harmony export */\n            \"bzFunction\": function () {\n              return (\n                /* binding */\n                bzFunction\n              );\n            },\n\n            /* harmony export */\n            \"buzzierMinSols\": function () {\n              return (\n                /* binding */\n                buzzierMinSols\n              );\n            }\n            /* harmony export */\n\n          }); // Buzier curve calculations\n\n          /**\r\n           * returns buzzier curve function with 2 controls points\r\n           * bzCurve with 2 control points function(4 points total):  bz = (1−t)^3*p1 + 3(1−t)^2*t*p2 +3(1−t)*t^2*p3 + t^3*p4\r\n           */\n\n\n          var bzFunction = function bzFunction(p1, p2, p3, p4) {\n            return function (t) {\n              return Math.pow(1 - t, 3) * p1 + 3 * Math.pow(1 - t, 2) * t * p2 + 3 * (1 - t) * Math.pow(t, 2) * p3 + Math.pow(t, 3) * p4;\n            };\n          };\n          /**\r\n           * returns 2 solutions from extram points for buzzier curve with 2 controls points\r\n           */\n\n\n          var buzzierMinSols = function buzzierMinSols(p1, p2, p3, p4) {\n            var bz = bzFunction(p1, p2, p3, p4); // dt(bz) = -3 p1 (1 - t)^2 + 3 p2 (1 - t)^2 - 6 p2 (1 - t) t + 6 p3 (1 - t) t - 3 p3 t^2 + 3 p4 t^2\n            // when p1=(x1,y1),p2=(cpx1,cpy1),p3=(cpx2,cpy2),p4=(x2,y2)\n            // then extrema points is when dt(bz) = 0\n            // solutions =>  t = ((-6 p1 + 12 p2 - 6 p3) ± sqrt((6 p1 - 12 p2 + 6 p3)^2 - 4 (3 p2 - 3 p1) (-3 p1 + 9 p2 - 9 p3 + 3 p4)))/(2 (-3 p1 + 9 p2 - 9 p3 + 3 p4))  when (p1 + 3 p3!=3 p2 + p4)\n            // if we mark A=(-6 p1 + 12 p2 - 6 p3) and B=(6 p1 - 12 p2 + 6 p3)^2 - 4 (3 p2 - 3 p1) (-3 p1 + 9 p2 - 9 p3 + 3 p4)) and C =(2 (-3 p1 + 9 p2 - 9 p3 + 3 p4) then\n            // tSol = A ± sqrt(B)\n            // then solution we want is: bz(tSol)\n\n            var A = -6 * p1 + 12 * p2 - 6 * p3;\n            var B = Math.pow(-6 * p1 + 12 * p2 - 6 * p3, 2) - 4 * (3 * p2 - 3 * p1) * (-3 * p1 + 9 * p2 - 9 * p3 + 3 * p4);\n            var C = 2 * (-3 * p1 + 9 * p2 - 9 * p3 + 3 * p4);\n            var sol1 = bz((A + Math.sqrt(B)) / C);\n            var sol2 = bz((A - Math.sqrt(B)) / C);\n            return [sol1, sol2];\n          };\n          /***/\n\n        },\n\n        /***/\n        \"./src/Xarrow/Xarrow.tsx\":\n        /*!*******************************!*\\\n          !*** ./src/Xarrow/Xarrow.tsx ***!\n          \\*******************************/\n\n        /***/\n        function (__unused_webpack_module, exports, __webpack_require__) {\n          var __assign = this && this.__assign || function () {\n            __assign = Object.assign || function (t) {\n              for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n              }\n\n              return t;\n            };\n\n            return __assign.apply(this, arguments);\n          };\n\n          var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n            if (k2 === undefined) k2 = k;\n            Object.defineProperty(o, k2, {\n              enumerable: true,\n              get: function () {\n                return m[k];\n              }\n            });\n          } : function (o, m, k, k2) {\n            if (k2 === undefined) k2 = k;\n            o[k2] = m[k];\n          });\n\n          var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n            Object.defineProperty(o, \"default\", {\n              enumerable: true,\n              value: v\n            });\n          } : function (o, v) {\n            o[\"default\"] = v;\n          });\n\n          var __importStar = this && this.__importStar || function (mod) {\n            if (mod && mod.__esModule) return mod;\n            var result = {};\n            if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n            __setModuleDefault(result, mod);\n\n            return result;\n          };\n\n          var __spreadArray = this && this.__spreadArray || function (to, from) {\n            for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n            return to;\n          };\n\n          var __importDefault = this && this.__importDefault || function (mod) {\n            return mod && mod.__esModule ? mod : {\n              \"default\": mod\n            };\n          };\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n\n          var react_1 = __importStar(__webpack_require__(\n          /*! react */\n          \"react\"));\n\n          var useXarrowProps_1 = __importDefault(__webpack_require__(\n          /*! ./useXarrowProps */\n          \"./src/Xarrow/useXarrowProps.ts\"));\n\n          var Xwrapper_1 = __webpack_require__(\n          /*! ../Xwrapper */\n          \"./src/Xwrapper.tsx\");\n\n          var propTypes_1 = __importDefault(__webpack_require__(\n          /*! ./propTypes */\n          \"./src/Xarrow/propTypes.ts\"));\n\n          var GetPosition_1 = __webpack_require__(\n          /*! ./utils/GetPosition */\n          \"./src/Xarrow/utils/GetPosition.tsx\");\n\n          var log = console.log;\n\n          var Xarrow = function (props) {\n            // log('xarrow update');\n            var _a;\n\n            var mainRef = react_1.useRef({\n              svgRef: react_1.useRef(null),\n              lineRef: react_1.useRef(null),\n              headRef: react_1.useRef(null),\n              tailRef: react_1.useRef(null),\n              lineDrawAnimRef: react_1.useRef(null),\n              lineDashAnimRef: react_1.useRef(null),\n              headOpacityAnimRef: react_1.useRef(null)\n            });\n            var _b = mainRef.current,\n                svgRef = _b.svgRef,\n                lineRef = _b.lineRef,\n                headRef = _b.headRef,\n                tailRef = _b.tailRef,\n                lineDrawAnimRef = _b.lineDrawAnimRef,\n                lineDashAnimRef = _b.lineDashAnimRef,\n                headOpacityAnimRef = _b.headOpacityAnimRef;\n            react_1.useContext(Xwrapper_1.XarrowContext);\n            var xProps = useXarrowProps_1.default(props, mainRef.current);\n            var propsRefs = xProps[0];\n            var labels = propsRefs.labels,\n                lineColor = propsRefs.lineColor,\n                headColor = propsRefs.headColor,\n                tailColor = propsRefs.tailColor,\n                strokeWidth = propsRefs.strokeWidth,\n                showHead = propsRefs.showHead,\n                showTail = propsRefs.showTail,\n                dashness = propsRefs.dashness,\n                headShape = propsRefs.headShape,\n                tailShape = propsRefs.tailShape,\n                showXarrow = propsRefs.showXarrow,\n                animateDrawing = propsRefs.animateDrawing,\n                zIndex = propsRefs.zIndex,\n                passProps = propsRefs.passProps,\n                arrowBodyProps = propsRefs.arrowBodyProps,\n                arrowHeadProps = propsRefs.arrowHeadProps,\n                arrowTailProps = propsRefs.arrowTailProps,\n                SVGcanvasProps = propsRefs.SVGcanvasProps,\n                divContainerProps = propsRefs.divContainerProps,\n                divContainerStyle = propsRefs.divContainerStyle,\n                SVGcanvasStyle = propsRefs.SVGcanvasStyle,\n                _debug = propsRefs._debug,\n                shouldUpdatePosition = propsRefs.shouldUpdatePosition;\n            animateDrawing = props.animateDrawing;\n\n            var _c = react_1.useState(!animateDrawing),\n                drawAnimEnded = _c[0],\n                setDrawAnimEnded = _c[1];\n\n            var _d = react_1.useState({}),\n                setRender = _d[1];\n\n            var forceRerender = function () {\n              return setRender({});\n            };\n\n            var _e = react_1.useState({\n              //initial state\n              cx0: 0,\n              cy0: 0,\n              cw: 0,\n              ch: 0,\n              x1: 0,\n              y1: 0,\n              x2: 0,\n              y2: 0,\n              dx: 0,\n              dy: 0,\n              absDx: 0,\n              absDy: 0,\n              cpx1: 0,\n              cpy1: 0,\n              cpx2: 0,\n              cpy2: 0,\n              headOrient: 0,\n              tailOrient: 0,\n              arrowHeadOffset: {\n                x: 0,\n                y: 0\n              },\n              arrowTailOffset: {\n                x: 0,\n                y: 0\n              },\n              headOffset: 0,\n              excRight: 0,\n              excLeft: 0,\n              excUp: 0,\n              excDown: 0,\n              startPoints: [],\n              endPoints: [],\n              mainDivPos: {\n                x: 0,\n                y: 0\n              },\n              xSign: 1,\n              ySign: 1,\n              lineLength: 0,\n              fHeadSize: 1,\n              fTailSize: 1,\n              arrowPath: \"\",\n              labelStartPos: {\n                x: 0,\n                y: 0\n              },\n              labelMiddlePos: {\n                x: 0,\n                y: 0\n              },\n              labelEndPos: {\n                x: 0,\n                y: 0\n              }\n            }),\n                st = _e[0],\n                setSt = _e[1];\n            /**\r\n             * The Main logic of path calculation for the arrow.\r\n             * calculate new path, adjusting canvas, and set state based on given properties.\r\n             * */\n\n\n            react_1.useLayoutEffect(function () {\n              if (shouldUpdatePosition.current) {\n                // log('xarrow getPosition');\n                var pos = GetPosition_1.getPosition(xProps, mainRef); // log('pos', pos);\n\n                setSt(pos);\n                shouldUpdatePosition.current = false;\n              }\n            }); // log('st', st);\n\n            var xOffsetHead = st.x2 - st.arrowHeadOffset.x;\n            var yOffsetHead = st.y2 - st.arrowHeadOffset.y;\n            var xOffsetTail = st.x1 - st.arrowTailOffset.x;\n            var yOffsetTail = st.y1 - st.arrowTailOffset.y;\n            var dashoffset = dashness.strokeLen + dashness.nonStrokeLen;\n            var animDirection = 1;\n\n            if (dashness.animation < 0) {\n              dashness.animation *= -1;\n              animDirection = -1;\n            }\n\n            var dashArray,\n                animation,\n                animRepeatCount,\n                animStartValue,\n                animEndValue = 0;\n\n            if (animateDrawing && drawAnimEnded == false) {\n              if (typeof animateDrawing === 'boolean') animateDrawing = 1;\n              animation = animateDrawing + 's';\n              dashArray = st.lineLength;\n              animStartValue = st.lineLength;\n              animRepeatCount = 1;\n\n              if (animateDrawing < 0) {\n                _a = [animEndValue, animStartValue], animStartValue = _a[0], animEndValue = _a[1];\n                animation = animateDrawing * -1 + 's';\n              }\n            } else {\n              dashArray = dashness.strokeLen + \" \" + dashness.nonStrokeLen;\n              animation = 1 / dashness.animation + \"s\";\n              animStartValue = dashoffset * animDirection;\n              animRepeatCount = 'indefinite';\n              animEndValue = 0;\n            } // handle draw animation\n\n\n            react_1.useLayoutEffect(function () {\n              if (lineRef.current) setSt(function (prevSt) {\n                var _a, _b;\n\n                return __assign(__assign({}, prevSt), {\n                  lineLength: (_b = (_a = lineRef.current) === null || _a === void 0 ? void 0 : _a.getTotalLength()) !== null && _b !== void 0 ? _b : 0\n                });\n              });\n            }, [lineRef.current]); // set all props on first render\n\n            react_1.useEffect(function () {\n              var monitorDOMchanges = function () {\n                window.addEventListener('resize', forceRerender);\n\n                var handleDrawAmimEnd = function () {\n                  var _a, _b;\n\n                  setDrawAnimEnded(true); // @ts-ignore\n\n                  (_a = headOpacityAnimRef.current) === null || _a === void 0 ? void 0 : _a.beginElement(); // @ts-ignore\n\n                  (_b = lineDashAnimRef.current) === null || _b === void 0 ? void 0 : _b.beginElement();\n                };\n\n                var handleDrawAmimBegin = function () {\n                  return headRef.current.style.opacity = '0';\n                };\n\n                if (lineDrawAnimRef.current && headRef.current) {\n                  lineDrawAnimRef.current.addEventListener('endEvent', handleDrawAmimEnd);\n                  lineDrawAnimRef.current.addEventListener('beginEvent', handleDrawAmimBegin);\n                }\n\n                return function () {\n                  window.removeEventListener('resize', forceRerender);\n\n                  if (lineDrawAnimRef.current) {\n                    lineDrawAnimRef.current.removeEventListener('endEvent', handleDrawAmimEnd);\n                    if (headRef.current) lineDrawAnimRef.current.removeEventListener('beginEvent', handleDrawAmimBegin);\n                  }\n                };\n              };\n\n              var cleanMonitorDOMchanges = monitorDOMchanges();\n              return function () {\n                setDrawAnimEnded(false);\n                cleanMonitorDOMchanges();\n              };\n            }, [showXarrow]); //todo: could make some advanced generic typescript inferring. for example get type from headShape.elem:T and\n            // tailShape.elem:K force the type for passProps,arrowHeadProps,arrowTailProps property. for now `as any` is used to\n            // avoid typescript conflicts\n            // so todo- fix all the `passProps as any` assertions\n\n            return react_1.default.createElement(\"div\", __assign({}, divContainerProps, {\n              style: __assign({\n                position: 'absolute',\n                zIndex: zIndex\n              }, divContainerStyle)\n            }), showXarrow ? react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(\"svg\", __assign({\n              ref: svgRef,\n              width: st.cw,\n              height: st.ch,\n              style: __assign({\n                position: 'absolute',\n                left: st.cx0,\n                top: st.cy0,\n                pointerEvents: 'none',\n                border: _debug ? '1px dashed yellow' : null\n              }, SVGcanvasStyle),\n              overflow: \"auto\"\n            }, SVGcanvasProps), react_1.default.createElement(\"path\", __assign({\n              ref: lineRef,\n              d: st.arrowPath,\n              stroke: lineColor,\n              strokeDasharray: dashArray,\n              // strokeDasharray={'0 0'}\n              strokeWidth: strokeWidth,\n              fill: \"transparent\",\n              pointerEvents: \"visibleStroke\"\n            }, passProps, arrowBodyProps), react_1.default.createElement(react_1.default.Fragment, null, drawAnimEnded ? react_1.default.createElement(react_1.default.Fragment, null, dashness.animation ? react_1.default.createElement(\"animate\", {\n              ref: lineDashAnimRef,\n              attributeName: \"stroke-dashoffset\",\n              values: dashoffset * animDirection + \";0\",\n              dur: 1 / dashness.animation + \"s\",\n              repeatCount: \"indefinite\"\n            }) : null) : react_1.default.createElement(react_1.default.Fragment, null, animateDrawing ? react_1.default.createElement(\"animate\", {\n              ref: lineDrawAnimRef,\n              id: \"svgEndAnimate\",\n              attributeName: \"stroke-dashoffset\",\n              values: animStartValue + \";\" + animEndValue,\n              dur: animation,\n              repeatCount: animRepeatCount\n            }) : null))), showTail ? react_1.default.createElement(\"g\", __assign({\n              fill: tailColor,\n              pointerEvents: \"auto\",\n              transform: \"translate(\" + xOffsetTail + \",\" + yOffsetTail + \") rotate(\" + st.tailOrient + \") scale(\" + st.fTailSize + \")\"\n            }, passProps, arrowTailProps), tailShape.svgElem) : null, showHead ? react_1.default.createElement(\"g\", __assign({\n              ref: headRef,\n              // d={normalArrowShape}\n              fill: headColor,\n              pointerEvents: \"auto\",\n              transform: \"translate(\" + xOffsetHead + \",\" + yOffsetHead + \") rotate(\" + st.headOrient + \") scale(\" + st.fHeadSize + \")\",\n              opacity: animateDrawing && !drawAnimEnded ? 0 : 1\n            }, passProps, arrowHeadProps), react_1.default.createElement(\"animate\", {\n              ref: headOpacityAnimRef,\n              dur: '0.4',\n              attributeName: \"opacity\",\n              from: \"0\",\n              to: \"1\",\n              begin: \"indefinite\",\n              repeatCount: \"0\",\n              fill: \"freeze\"\n            }), headShape.svgElem) : null, _debug ? react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(\"circle\", {\n              r: \"5\",\n              cx: st.cpx1,\n              cy: st.cpy1,\n              fill: \"green\"\n            }), react_1.default.createElement(\"circle\", {\n              r: \"5\",\n              cx: st.cpx2,\n              cy: st.cpy2,\n              fill: \"blue\"\n            }), react_1.default.createElement(\"rect\", {\n              x: st.excLeft,\n              y: st.excUp,\n              width: st.absDx,\n              height: st.absDy,\n              fill: \"none\",\n              stroke: \"pink\",\n              strokeWidth: \"2px\"\n            })) : null), labels.start ? react_1.default.createElement(\"div\", {\n              style: {\n                transform: st.dx < 0 ? 'translate(-100% , -50%)' : 'translate(-0% , -50%)',\n                width: 'max-content',\n                position: 'absolute',\n                left: st.cx0 + st.labelStartPos.x,\n                top: st.cy0 + st.labelStartPos.y - strokeWidth - 5\n              }\n            }, labels.start) : null, labels.middle ? react_1.default.createElement(\"div\", {\n              style: {\n                display: 'table',\n                width: 'max-content',\n                transform: 'translate(-50% , -50%)',\n                position: 'absolute',\n                left: st.cx0 + st.labelMiddlePos.x,\n                top: st.cy0 + st.labelMiddlePos.y\n              }\n            }, labels.middle) : null, labels.end ? react_1.default.createElement(\"div\", {\n              style: {\n                transform: st.dx > 0 ? 'translate(-100% , -50%)' : 'translate(-0% , -50%)',\n                width: 'max-content',\n                position: 'absolute',\n                left: st.cx0 + st.labelEndPos.x,\n                top: st.cy0 + st.labelEndPos.y + strokeWidth + 5\n              }\n            }, labels.end) : null, _debug ? react_1.default.createElement(react_1.default.Fragment, null, __spreadArray(__spreadArray([], st.startPoints), st.endPoints).map(function (p, i) {\n              return react_1.default.createElement(\"div\", {\n                key: i,\n                style: {\n                  background: 'gray',\n                  opacity: 0.5,\n                  borderRadius: '50%',\n                  transform: 'translate(-50%, -50%)',\n                  height: 5,\n                  width: 5,\n                  position: 'absolute',\n                  left: p.x - st.mainDivPos.x,\n                  top: p.y - st.mainDivPos.y\n                }\n              });\n            })) : null) : null);\n          }; //////////////////////////////\n          // propTypes\n\n\n          Xarrow.propTypes = propTypes_1.default;\n          exports.default = Xarrow;\n          /***/\n        },\n\n        /***/\n        \"./src/Xarrow/anchors.ts\":\n        /*!*******************************!*\\\n          !*** ./src/Xarrow/anchors.ts ***!\n          \\*******************************/\n\n        /***/\n        function (module, exports, __webpack_require__) {\n          /* module decorator */\n          module = __webpack_require__.nmd(module);\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.calcAnchors = void 0;\n\n          var getAnchorsDefaultOffsets = function (width, height) {\n            return {\n              middle: {\n                x: width * 0.5,\n                y: height * 0.5\n              },\n              left: {\n                x: 0,\n                y: height * 0.5\n              },\n              right: {\n                x: width,\n                y: height * 0.5\n              },\n              top: {\n                x: width * 0.5,\n                y: 0\n              },\n              bottom: {\n                x: width * 0.5,\n                y: height\n              }\n            };\n          };\n\n          var calcAnchors = function (anchors, anchorPos) {\n            // now prepare this list of anchors to object expected by the `getShortestLine` function\n            return anchors.map(function (anchor) {\n              var defsOffsets = getAnchorsDefaultOffsets(anchorPos.right - anchorPos.x, anchorPos.bottom - anchorPos.y);\n              var _a = defsOffsets[anchor.position],\n                  x = _a.x,\n                  y = _a.y;\n              return {\n                x: anchorPos.x + x + anchor.offset.x,\n                y: anchorPos.y + y + anchor.offset.y,\n                anchor: anchor\n              };\n            });\n          };\n\n          exports.calcAnchors = calcAnchors;\n\n          if (__webpack_require__.c[__webpack_require__.s] === module) {// const res = parseAnchor(['auto'], {\n            //   x: 0,\n            //   y: 0,\n            //   bottom: 10,\n            //   right: 20,\n            // });\n            // console.log(res);\n          }\n          /***/\n\n        },\n\n        /***/\n        \"./src/Xarrow/propTypes.ts\":\n        /*!*********************************!*\\\n          !*** ./src/Xarrow/propTypes.ts ***!\n          \\*********************************/\n\n        /***/\n        function (__unused_webpack_module, exports, __webpack_require__) {\n          var __importDefault = this && this.__importDefault || function (mod) {\n            return mod && mod.__esModule ? mod : {\n              \"default\": mod\n            };\n          };\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n\n          var prop_types_1 = __importDefault(__webpack_require__(\n          /*! prop-types */\n          \"prop-types\"));\n\n          var constants_1 = __webpack_require__(\n          /*! ../constants */\n          \"./src/constants.tsx\");\n\n          var pAnchorPositionType = prop_types_1.default.oneOf(constants_1.cAnchorEdge);\n          var pAnchorCustomPositionType = prop_types_1.default.exact({\n            position: pAnchorPositionType.isRequired,\n            offset: prop_types_1.default.exact({\n              x: prop_types_1.default.number,\n              y: prop_types_1.default.number\n            }).isRequired\n          });\n\n          var _pAnchorType = prop_types_1.default.oneOfType([pAnchorPositionType, pAnchorCustomPositionType]);\n\n          var pAnchorType = prop_types_1.default.oneOfType([_pAnchorType, prop_types_1.default.arrayOf(_pAnchorType)]);\n          var pRefType = prop_types_1.default.oneOfType([prop_types_1.default.string, prop_types_1.default.exact({\n            current: prop_types_1.default.any\n          })]);\n\n          var _pLabelType = prop_types_1.default.oneOfType([prop_types_1.default.element, prop_types_1.default.string]);\n\n          var pLabelsType = prop_types_1.default.exact({\n            start: _pLabelType,\n            middle: _pLabelType,\n            end: _pLabelType\n          });\n          var pSvgEdgeShapeType = prop_types_1.default.oneOf(Object.keys(constants_1.arrowShapes)); // const pSvgElemType = PT.oneOf(cSvgElems);\n\n          var pSvgElemType = prop_types_1.default.any;\n          var pSvgEdgeType = prop_types_1.default.oneOfType([pSvgEdgeShapeType, prop_types_1.default.exact({\n            svgElem: pSvgElemType,\n            offsetForward: prop_types_1.default.number\n          }).isRequired]);\n          var XarrowPropTypes = {\n            start: pRefType.isRequired,\n            end: pRefType.isRequired,\n            startAnchor: pAnchorType,\n            endAnchor: pAnchorType,\n            labels: prop_types_1.default.oneOfType([_pLabelType, pLabelsType]),\n            color: prop_types_1.default.string,\n            lineColor: prop_types_1.default.string,\n            showHead: prop_types_1.default.bool,\n            headColor: prop_types_1.default.string,\n            headSize: prop_types_1.default.number,\n            tailSize: prop_types_1.default.number,\n            tailColor: prop_types_1.default.string,\n            strokeWidth: prop_types_1.default.number,\n            showTail: prop_types_1.default.bool,\n            path: prop_types_1.default.oneOf(constants_1.cPaths),\n            showXarrow: prop_types_1.default.bool,\n            curveness: prop_types_1.default.number,\n            gridBreak: prop_types_1.default.string,\n            dashness: prop_types_1.default.oneOfType([prop_types_1.default.bool, prop_types_1.default.object]),\n            headShape: pSvgEdgeType,\n            tailShape: pSvgEdgeType,\n            animateDrawing: prop_types_1.default.oneOfType([prop_types_1.default.bool, prop_types_1.default.number]),\n            zIndex: prop_types_1.default.number,\n            passProps: prop_types_1.default.object,\n            arrowBodyProps: prop_types_1.default.object,\n            arrowHeadProps: prop_types_1.default.object,\n            arrowTailProps: prop_types_1.default.object,\n            SVGcanvasProps: prop_types_1.default.object,\n            divContainerProps: prop_types_1.default.object,\n            _extendSVGcanvas: prop_types_1.default.number,\n            _debug: prop_types_1.default.bool,\n            _cpx1Offset: prop_types_1.default.number,\n            _cpy1Offset: prop_types_1.default.number,\n            _cpx2Offset: prop_types_1.default.number,\n            _cpy2Offset: prop_types_1.default.number\n          };\n          exports.default = XarrowPropTypes;\n          /***/\n        },\n\n        /***/\n        \"./src/Xarrow/useXarrowProps.ts\":\n        /*!**************************************!*\\\n          !*** ./src/Xarrow/useXarrowProps.ts ***!\n          \\**************************************/\n\n        /***/\n        function (__unused_webpack_module, exports, __webpack_require__) {\n          var __assign = this && this.__assign || function () {\n            __assign = Object.assign || function (t) {\n              for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n              }\n\n              return t;\n            };\n\n            return __assign.apply(this, arguments);\n          };\n\n          var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n            if (k2 === undefined) k2 = k;\n            Object.defineProperty(o, k2, {\n              enumerable: true,\n              get: function () {\n                return m[k];\n              }\n            });\n          } : function (o, m, k, k2) {\n            if (k2 === undefined) k2 = k;\n            o[k2] = m[k];\n          });\n\n          var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n            Object.defineProperty(o, \"default\", {\n              enumerable: true,\n              value: v\n            });\n          } : function (o, v) {\n            o[\"default\"] = v;\n          });\n\n          var __importStar = this && this.__importStar || function (mod) {\n            if (mod && mod.__esModule) return mod;\n            var result = {};\n            if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n            __setModuleDefault(result, mod);\n\n            return result;\n          };\n\n          var __importDefault = this && this.__importDefault || function (mod) {\n            return mod && mod.__esModule ? mod : {\n              \"default\": mod\n            };\n          };\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n\n          var react_1 = __importStar(__webpack_require__(\n          /*! react */\n          \"react\"));\n\n          var utils_1 = __webpack_require__(\n          /*! ./utils */\n          \"./src/Xarrow/utils/index.ts\");\n\n          var lodash_1 = __importDefault(__webpack_require__(\n          /*! lodash */\n          \"lodash\"));\n\n          var constants_1 = __webpack_require__(\n          /*! ../constants */\n          \"./src/constants.tsx\");\n\n          var parseLabels = function (label) {\n            var parsedLabel = {\n              start: null,\n              middle: null,\n              end: null\n            };\n\n            if (label) {\n              if (typeof label === 'string' || react_1.default.isValidElement(label)) parsedLabel.middle = label;else {\n                for (var key in label) {\n                  parsedLabel[key] = label[key];\n                }\n              }\n            }\n\n            return parsedLabel;\n          };\n\n          var parseAnchor = function (anchor) {\n            // convert to array\n            var anchorChoice = Array.isArray(anchor) ? anchor : [anchor]; //convert to array of objects\n\n            var anchorChoice2 = anchorChoice.map(function (anchorChoice) {\n              if (typeof anchorChoice === 'string') {\n                return {\n                  position: anchorChoice\n                };\n              } else return anchorChoice;\n            }); //remove any invalid anchor names\n\n            anchorChoice2 = anchorChoice2.filter(function (an) {\n              return constants_1.cAnchorEdge.includes(an.position);\n            });\n            if (anchorChoice2.length == 0) anchorChoice2 = [{\n              position: 'auto'\n            }]; //replace any 'auto' with ['left','right','bottom','top']\n\n            var autosAncs = anchorChoice2.filter(function (an) {\n              return an.position === 'auto';\n            });\n\n            if (autosAncs.length > 0) {\n              anchorChoice2 = anchorChoice2.filter(function (an) {\n                return an.position !== 'auto';\n              });\n              anchorChoice2.push.apply(anchorChoice2, autosAncs.flatMap(function (anchorObj) {\n                return ['left', 'right', 'top', 'bottom'].map(function (anchorName) {\n                  return __assign(__assign({}, anchorObj), {\n                    position: anchorName\n                  });\n                });\n              }));\n            } // default values\n\n\n            var anchorChoice3 = anchorChoice2.map(function (anchorChoice) {\n              if (typeof anchorChoice === 'object') {\n                var anchorChoiceCustom = anchorChoice;\n                if (!anchorChoiceCustom.position) anchorChoiceCustom.position = 'auto';\n                if (!anchorChoiceCustom.offset) anchorChoiceCustom.offset = {\n                  x: 0,\n                  y: 0\n                };\n                if (!anchorChoiceCustom.offset.y) anchorChoiceCustom.offset.y = 0;\n                if (!anchorChoiceCustom.offset.x) anchorChoiceCustom.offset.x = 0;\n                anchorChoiceCustom = anchorChoiceCustom;\n                return anchorChoiceCustom;\n              } else return anchorChoice;\n            });\n            return anchorChoice3;\n          };\n\n          var parseDashness = function (dashness, props) {\n            var dashStroke = 0,\n                dashNone = 0,\n                animDashSpeed,\n                animDirection = 1;\n\n            if (typeof dashness === 'object') {\n              dashStroke = dashness.strokeLen || props.strokeWidth * 2;\n              dashNone = dashness.strokeLen ? dashness.nonStrokeLen : props.strokeWidth;\n              animDashSpeed = dashness.animation ? dashness.animation : null;\n            } else if (typeof dashness === 'boolean' && dashness) {\n              dashStroke = props.strokeWidth * 2;\n              dashNone = props.strokeWidth;\n              animDashSpeed = null;\n            }\n\n            return {\n              strokeLen: dashStroke,\n              nonStrokeLen: dashNone,\n              animation: animDashSpeed,\n              animDirection: animDirection\n            };\n          };\n\n          var parseEdgeShape = function (svgEdge) {\n            if (typeof svgEdge == 'string') {\n              if (svgEdge in constants_1.arrowShapes) svgEdge = constants_1.arrowShapes[svgEdge];else {\n                console.warn(\"'\" + svgEdge + \"' is not supported arrow shape. the supported arrow shapes is one of \" + constants_1.cArrowShapes + \".\\n           reverting to default shape.\");\n                svgEdge = constants_1.arrowShapes['arrow1'];\n              }\n            }\n\n            svgEdge = svgEdge;\n            if ((svgEdge === null || svgEdge === void 0 ? void 0 : svgEdge.offsetForward) === undefined) svgEdge.offsetForward = 0.25;\n            if ((svgEdge === null || svgEdge === void 0 ? void 0 : svgEdge.svgElem) === undefined) svgEdge.svgElem = 'path'; // if (svgEdge?.svgProps === undefined) svgEdge.svgProps = arrowShapes.arrow1.svgProps;\n\n            return svgEdge;\n          };\n\n          var parseGridBreak = function (gridBreak) {\n            var resGridBreak = utils_1.xStr2absRelative(gridBreak);\n            if (!resGridBreak) resGridBreak = {\n              relative: 0.5,\n              abs: 0\n            };\n            return resGridBreak;\n          };\n          /**\r\n           * should be wrapped with any changed prop that is affecting the points path positioning\r\n           * @param propVal\r\n           * @param updateRef\r\n           */\n\n\n          var withUpdate = function (propVal, updateRef) {\n            if (updateRef) updateRef.current = true;\n            return propVal;\n          };\n\n          var noParse = function (userProp) {\n            return userProp;\n          };\n\n          var noParseWithUpdatePos = function (userProp, _, updatePos) {\n            return withUpdate(userProp, updatePos);\n          };\n\n          var parseNumWithUpdatePos = function (userProp, _, updatePos) {\n            return withUpdate(Number(userProp), updatePos);\n          };\n\n          var parseNum = function (userProp) {\n            return Number(userProp);\n          };\n\n          var parsePropsFuncs = {\n            start: function (userProp) {\n              return utils_1.getElementByPropGiven(userProp);\n            },\n            end: function (userProp) {\n              return utils_1.getElementByPropGiven(userProp);\n            },\n            startAnchor: function (userProp, _, updatePos) {\n              return withUpdate(parseAnchor(userProp), updatePos);\n            },\n            endAnchor: function (userProp, _, updatePos) {\n              return withUpdate(parseAnchor(userProp), updatePos);\n            },\n            labels: function (userProp) {\n              return parseLabels(userProp);\n            },\n            color: noParse,\n            lineColor: function (userProp, propsRefs) {\n              return userProp || propsRefs.color;\n            },\n            headColor: function (userProp, propsRefs) {\n              return userProp || propsRefs.color;\n            },\n            tailColor: function (userProp, propsRefs) {\n              return userProp || propsRefs.color;\n            },\n            strokeWidth: parseNumWithUpdatePos,\n            showHead: noParseWithUpdatePos,\n            headSize: parseNumWithUpdatePos,\n            showTail: noParseWithUpdatePos,\n            tailSize: parseNumWithUpdatePos,\n            path: noParseWithUpdatePos,\n            curveness: parseNumWithUpdatePos,\n            gridBreak: function (userProp, _, updatePos) {\n              return withUpdate(parseGridBreak(userProp), updatePos);\n            },\n            // // gridRadius = strokeWidth * 2, //todo\n            dashness: function (userProp, propsRefs) {\n              return parseDashness(userProp, propsRefs);\n            },\n            headShape: function (userProp) {\n              return parseEdgeShape(userProp);\n            },\n            tailShape: function (userProp) {\n              return parseEdgeShape(userProp);\n            },\n            showXarrow: noParse,\n            animateDrawing: noParse,\n            zIndex: parseNum,\n            passProps: noParse,\n            arrowBodyProps: noParseWithUpdatePos,\n            arrowHeadProps: noParseWithUpdatePos,\n            arrowTailProps: noParseWithUpdatePos,\n            SVGcanvasProps: noParseWithUpdatePos,\n            divContainerProps: noParseWithUpdatePos,\n            divContainerStyle: noParseWithUpdatePos,\n            SVGcanvasStyle: noParseWithUpdatePos,\n            _extendSVGcanvas: noParseWithUpdatePos,\n            _debug: noParseWithUpdatePos,\n            _cpx1Offset: noParseWithUpdatePos,\n            _cpy1Offset: noParseWithUpdatePos,\n            _cpx2Offset: noParseWithUpdatePos,\n            _cpy2Offset: noParseWithUpdatePos\n          }; //build dependencies\n\n          var propsDeps = {}; //each prop depends on himself\n\n          for (var propName in parsePropsFuncs) {\n            propsDeps[propName] = [propName];\n          } // 'lineColor', 'headColor', 'tailColor' props also depends on 'color' prop\n\n\n          for (var _i = 0, _a = ['lineColor', 'headColor', 'tailColor']; _i < _a.length; _i++) {\n            var propName = _a[_i];\n            propsDeps[propName].push('color');\n          }\n\n          var parseGivenProps = function (props, propsRef) {\n            var _a;\n\n            for (var _i = 0, _b = Object.entries(props); _i < _b.length; _i++) {\n              var _c = _b[_i],\n                  name_1 = _c[0],\n                  val = _c[1];\n              propsRef[name_1] = (_a = parsePropsFuncs === null || parsePropsFuncs === void 0 ? void 0 : parsePropsFuncs[name_1]) === null || _a === void 0 ? void 0 : _a.call(parsePropsFuncs, val, propsRef);\n            }\n\n            return propsRef;\n          };\n\n          var defaultProps = {\n            start: null,\n            end: null,\n            startAnchor: 'auto',\n            endAnchor: 'auto',\n            labels: null,\n            color: 'CornflowerBlue',\n            lineColor: null,\n            headColor: null,\n            tailColor: null,\n            strokeWidth: 4,\n            showHead: true,\n            headSize: 6,\n            showTail: false,\n            tailSize: 6,\n            path: 'smooth',\n            curveness: 0.8,\n            gridBreak: '50%',\n            // gridRadius : strokeWidth * 2, //todo\n            dashness: false,\n            headShape: 'arrow1',\n            tailShape: 'arrow1',\n            showXarrow: true,\n            animateDrawing: false,\n            zIndex: 0,\n            passProps: {},\n            arrowBodyProps: {},\n            arrowHeadProps: {},\n            arrowTailProps: {},\n            SVGcanvasProps: {},\n            divContainerProps: {},\n            divContainerStyle: {},\n            SVGcanvasStyle: {},\n            _extendSVGcanvas: 0,\n            _debug: false,\n            _cpx1Offset: 0,\n            _cpy1Offset: 0,\n            _cpx2Offset: 0,\n            _cpy2Offset: 0\n          };\n          var initialParsedProps = {};\n          initialParsedProps = parseGivenProps(defaultProps, initialParsedProps);\n          var initialValVars = {\n            startPos: {\n              x: 0,\n              y: 0,\n              right: 0,\n              bottom: 0\n            },\n            endPos: {\n              x: 0,\n              y: 0,\n              right: 0,\n              bottom: 0\n            }\n          }; // const parseAllProps = () => parseGivenProps(defaultProps, initialParsedProps);\n\n          function deepCompareEquals(a, b) {\n            return lodash_1.default.isEqual(a, b);\n          }\n\n          function useDeepCompareMemoize(value) {\n            var ref = react_1.useRef(); // it can be done by using useMemo as well\n            // but useRef is rather cleaner and easier\n\n            if (!deepCompareEquals(value, ref.current)) {\n              ref.current = value;\n            }\n\n            return ref.current;\n          }\n\n          function useDeepCompareEffect(callback, dependencies) {\n            react_1.useLayoutEffect(callback, dependencies.map(useDeepCompareMemoize));\n          }\n          /**\r\n           * smart hook that provides parsed props to Xarrow and will trigger rerender whenever given prop is changed.\r\n           */\n\n\n          var useXarrowProps = function (userProps, refs) {\n            var _a = react_1.useState(initialParsedProps),\n                propsRefs = _a[0],\n                setPropsRefs = _a[1];\n\n            var shouldUpdatePosition = react_1.useRef(false); // const _propsRefs = useRef(initialParsedProps);\n            // const propsRefs = _propsRefs.current;\n\n            propsRefs['shouldUpdatePosition'] = shouldUpdatePosition;\n\n            var curProps = __assign(__assign({}, defaultProps), userProps);\n\n            var _loop_1 = function (propName) {\n              react_1.useLayoutEffect(function () {\n                var _a;\n\n                propsRefs[propName] = (_a = parsePropsFuncs === null || parsePropsFuncs === void 0 ? void 0 : parsePropsFuncs[propName]) === null || _a === void 0 ? void 0 : _a.call(parsePropsFuncs, curProps[propName], propsRefs, shouldUpdatePosition); // console.log('prop update:', propName, 'with value', propsRefs[propName]);\n\n                setPropsRefs(__assign({}, propsRefs));\n              }, propsDeps[propName].map(function (name) {\n                return userProps[name];\n              }));\n            }; // react states the number of hooks per render must stay constant,\n            // this is ok we are using these hooks in a loop, because the number of props in defaultProps is constant,\n            // so the number of hook we will fire each render will always be the same.\n            // update the value of the ref that represents the corresponding prop\n            // for example: if given 'start' prop would change call getElementByPropGiven(props.start) and save value into propsRefs.start.current\n            // why to save refs to props parsed values? some of the props require relatively expensive computations(like 'start' and 'startAnchor').\n            // this will always run in the same order and THAT'S WAY ITS LEGAL\n\n\n            for (var propName in defaultProps) {\n              _loop_1(propName);\n            } // rerender whenever position of start element or end element changes\n\n\n            var _b = react_1.useState(initialValVars),\n                valVars = _b[0],\n                setValVars = _b[1];\n\n            var startPos = utils_1.getElemPos(propsRefs.start);\n            useDeepCompareEffect(function () {\n              valVars.startPos = startPos;\n              shouldUpdatePosition.current = true;\n              setValVars(__assign({}, valVars)); // console.log('start update pos', startPos);\n            }, [startPos]);\n            var endPos = utils_1.getElemPos(propsRefs.end);\n            useDeepCompareEffect(function () {\n              valVars.endPos = endPos;\n              shouldUpdatePosition.current = true;\n              setValVars(__assign({}, valVars)); // console.log('end update pos', endPos);\n            }, [endPos]);\n            react_1.useLayoutEffect(function () {\n              // console.log('svg shape changed!');\n              shouldUpdatePosition.current = true;\n              setValVars(__assign({}, valVars));\n            }, [propsRefs.headShape.svgElem, propsRefs.tailShape.svgElem]);\n            return [propsRefs, valVars];\n          };\n\n          exports.default = useXarrowProps;\n          /***/\n        },\n\n        /***/\n        \"./src/Xarrow/utils/GetPosition.tsx\":\n        /*!******************************************!*\\\n          !*** ./src/Xarrow/utils/GetPosition.tsx ***!\n          \\******************************************/\n\n        /***/\n        function (__unused_webpack_module, exports, __webpack_require__) {\n          var __importDefault = this && this.__importDefault || function (mod) {\n            return mod && mod.__esModule ? mod : {\n              \"default\": mod\n            };\n          };\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.getPosition = void 0;\n\n          var anchors_1 = __webpack_require__(\n          /*! ../anchors */\n          \"./src/Xarrow/anchors.ts\");\n\n          var index_1 = __webpack_require__(\n          /*! ./index */\n          \"./src/Xarrow/utils/index.ts\");\n\n          var lodash_1 = __importDefault(__webpack_require__(\n          /*! lodash */\n          \"lodash\"));\n\n          var constants_1 = __webpack_require__(\n          /*! ../../constants */\n          \"./src/constants.tsx\");\n\n          var buzzier_1 = __webpack_require__(\n          /*! ./buzzier */\n          \"./src/Xarrow/utils/buzzier.js\");\n          /**\r\n           * The Main logic of path calculation for the arrow.\r\n           * calculate new path, adjusting canvas, and set state based on given properties.\r\n           * */\n\n\n          var getPosition = function (xProps, mainRef) {\n            var _a, _b;\n\n            var _c, _d;\n\n            var propsRefs = xProps[0],\n                valVars = xProps[1];\n            var startAnchor = propsRefs.startAnchor,\n                endAnchor = propsRefs.endAnchor,\n                strokeWidth = propsRefs.strokeWidth,\n                showHead = propsRefs.showHead,\n                headSize = propsRefs.headSize,\n                showTail = propsRefs.showTail,\n                tailSize = propsRefs.tailSize,\n                path = propsRefs.path,\n                curveness = propsRefs.curveness,\n                gridBreak = propsRefs.gridBreak,\n                headShape = propsRefs.headShape,\n                tailShape = propsRefs.tailShape,\n                _extendSVGcanvas = propsRefs._extendSVGcanvas,\n                _cpx1Offset = propsRefs._cpx1Offset,\n                _cpy1Offset = propsRefs._cpy1Offset,\n                _cpx2Offset = propsRefs._cpx2Offset,\n                _cpy2Offset = propsRefs._cpy2Offset;\n            var startPos = valVars.startPos,\n                endPos = valVars.endPos;\n            var _e = mainRef.current,\n                svgRef = _e.svgRef,\n                lineRef = _e.lineRef;\n            var headOrient = 0;\n            var tailOrient = 0; // convert startAnchor and endAnchor to list of objects represents allowed anchors.\n\n            var startPoints = anchors_1.calcAnchors(startAnchor, startPos);\n            var endPoints = anchors_1.calcAnchors(endAnchor, endPos); // choose the smallest path for 2 points from these possibilities.\n\n            var _f = index_1.getShortestLine(startPoints, endPoints),\n                chosenStart = _f.chosenStart,\n                chosenEnd = _f.chosenEnd;\n\n            var startAnchorPosition = chosenStart.anchor.position,\n                endAnchorPosition = chosenEnd.anchor.position;\n            var startPoint = lodash_1.default.pick(chosenStart, ['x', 'y']),\n                endPoint = lodash_1.default.pick(chosenEnd, ['x', 'y']);\n            var mainDivPos = index_1.getSvgPos(svgRef);\n            var cx0 = Math.min(startPoint.x, endPoint.x) - mainDivPos.x;\n            var cy0 = Math.min(startPoint.y, endPoint.y) - mainDivPos.y;\n            var dx = endPoint.x - startPoint.x;\n            var dy = endPoint.y - startPoint.y;\n            var absDx = Math.abs(endPoint.x - startPoint.x);\n            var absDy = Math.abs(endPoint.y - startPoint.y);\n            var xSign = dx > 0 ? 1 : -1;\n            var ySign = dy > 0 ? 1 : -1;\n            var _g = [headShape.offsetForward, tailShape.offsetForward],\n                headOffset = _g[0],\n                tailOffset = _g[1];\n            var fHeadSize = headSize * strokeWidth; //factored head size\n\n            var fTailSize = tailSize * strokeWidth; //factored head size\n            // const { current: _headBox } = headBox;\n\n            var xHeadOffset = 0;\n            var yHeadOffset = 0;\n            var xTailOffset = 0;\n            var yTailOffset = 0;\n\n            var _headOffset = fHeadSize * headOffset;\n\n            var _tailOffset = fTailSize * tailOffset;\n\n            var cu = Number(curveness); // gridRadius = Number(gridRadius);\n\n            if (!constants_1.cPaths.includes(path)) path = 'smooth';\n\n            if (path === 'straight') {\n              cu = 0;\n              path = 'smooth';\n            }\n\n            var biggerSide = headSize > tailSize ? headSize : tailSize;\n\n            var _calc = strokeWidth + strokeWidth * biggerSide / 2;\n\n            var excRight = _calc;\n            var excLeft = _calc;\n            var excUp = _calc;\n            var excDown = _calc;\n            excLeft += Number(_extendSVGcanvas);\n            excRight += Number(_extendSVGcanvas);\n            excUp += Number(_extendSVGcanvas);\n            excDown += Number(_extendSVGcanvas); ////////////////////////////////////\n            // arrow point to point calculations\n\n            var x1 = 0,\n                x2 = absDx,\n                y1 = 0,\n                y2 = absDy;\n            if (dx < 0) _a = [x2, x1], x1 = _a[0], x2 = _a[1];\n            if (dy < 0) _b = [y2, y1], y1 = _b[0], y2 = _b[1]; ////////////////////////////////////\n            // arrow curviness and arrowhead placement calculations\n\n            if (cu === 0) {\n              // in case of straight path\n              var headAngel = Math.atan(absDy / absDx);\n\n              if (showHead) {\n                x2 -= fHeadSize * (1 - headOffset) * xSign * Math.cos(headAngel);\n                y2 -= fHeadSize * (1 - headOffset) * ySign * Math.sin(headAngel);\n                headAngel *= ySign;\n                if (xSign < 0) headAngel = (Math.PI - headAngel * xSign) * xSign;\n                xHeadOffset = Math.cos(headAngel) * _headOffset - Math.sin(headAngel) * fHeadSize / 2;\n                yHeadOffset = Math.cos(headAngel) * fHeadSize / 2 + Math.sin(headAngel) * _headOffset;\n                headOrient = headAngel * 180 / Math.PI;\n              }\n\n              var tailAngel = Math.atan(absDy / absDx);\n\n              if (showTail) {\n                x1 += fTailSize * (1 - tailOffset) * xSign * Math.cos(tailAngel);\n                y1 += fTailSize * (1 - tailOffset) * ySign * Math.sin(tailAngel);\n                tailAngel *= -ySign;\n                if (xSign > 0) tailAngel = (Math.PI - tailAngel * xSign) * xSign;\n                xTailOffset = Math.cos(tailAngel) * _tailOffset - Math.sin(tailAngel) * fTailSize / 2;\n                yTailOffset = Math.cos(tailAngel) * fTailSize / 2 + Math.sin(tailAngel) * _tailOffset;\n                tailOrient = tailAngel * 180 / Math.PI;\n              }\n            } else {\n              // in case of smooth path\n              if (endAnchorPosition === 'middle') {\n                // in case a middle anchor is chosen for endAnchor choose from which side to attach to the middle of the element\n                if (absDx > absDy) {\n                  endAnchorPosition = xSign ? 'left' : 'right';\n                } else {\n                  endAnchorPosition = ySign ? 'top' : 'bottom';\n                }\n              }\n\n              if (showHead) {\n                if (['left', 'right'].includes(endAnchorPosition)) {\n                  xHeadOffset += _headOffset * xSign;\n                  x2 -= fHeadSize * (1 - headOffset) * xSign; //same!\n\n                  yHeadOffset += fHeadSize * xSign / 2;\n\n                  if (endAnchorPosition === 'left') {\n                    headOrient = 0;\n                    if (xSign < 0) headOrient += 180;\n                  } else {\n                    headOrient = 180;\n                    if (xSign > 0) headOrient += 180;\n                  }\n                } else if (['top', 'bottom'].includes(endAnchorPosition)) {\n                  xHeadOffset += fHeadSize * -ySign / 2;\n                  yHeadOffset += _headOffset * ySign;\n                  y2 -= fHeadSize * ySign - yHeadOffset;\n\n                  if (endAnchorPosition === 'top') {\n                    headOrient = 270;\n                    if (ySign > 0) headOrient += 180;\n                  } else {\n                    headOrient = 90;\n                    if (ySign < 0) headOrient += 180;\n                  }\n                }\n              }\n            }\n\n            if (showTail && cu !== 0) {\n              if (['left', 'right'].includes(startAnchorPosition)) {\n                xTailOffset += _tailOffset * -xSign;\n                x1 += fTailSize * xSign + xTailOffset;\n                yTailOffset += -(fTailSize * xSign) / 2;\n\n                if (startAnchorPosition === 'left') {\n                  tailOrient = 180;\n                  if (xSign < 0) tailOrient += 180;\n                } else {\n                  tailOrient = 0;\n                  if (xSign > 0) tailOrient += 180;\n                }\n              } else if (['top', 'bottom'].includes(startAnchorPosition)) {\n                yTailOffset += _tailOffset * -ySign;\n                y1 += fTailSize * ySign + yTailOffset;\n                xTailOffset += fTailSize * ySign / 2;\n\n                if (startAnchorPosition === 'top') {\n                  tailOrient = 90;\n                  if (ySign > 0) tailOrient += 180;\n                } else {\n                  tailOrient = 270;\n                  if (ySign < 0) tailOrient += 180;\n                }\n              }\n            }\n\n            var arrowHeadOffset = {\n              x: xHeadOffset,\n              y: yHeadOffset\n            };\n            var arrowTailOffset = {\n              x: xTailOffset,\n              y: yTailOffset\n            };\n            var cpx1 = x1,\n                cpy1 = y1,\n                cpx2 = x2,\n                cpy2 = y2;\n            var curvesPossibilities = {};\n            if (path === 'smooth') curvesPossibilities = {\n              hh: function () {\n                //horizontal - from right to left or the opposite\n                cpx1 += absDx * cu * xSign;\n                cpx2 -= absDx * cu * xSign;\n              },\n              vv: function () {\n                //vertical - from top to bottom or opposite\n                cpy1 += absDy * cu * ySign;\n                cpy2 -= absDy * cu * ySign;\n              },\n              hv: function () {\n                // start horizontally then vertically\n                // from v side to h side\n                cpx1 += absDx * cu * xSign;\n                cpy2 -= absDy * cu * ySign;\n              },\n              vh: function () {\n                // start vertically then horizontally\n                // from h side to v side\n                cpy1 += absDy * cu * ySign;\n                cpx2 -= absDx * cu * xSign;\n              }\n            };else if (path === 'grid') {\n              curvesPossibilities = {\n                hh: function () {\n                  cpx1 += (absDx * gridBreak.relative + gridBreak.abs) * xSign;\n                  cpx2 -= (absDx * (1 - gridBreak.relative) - gridBreak.abs) * xSign;\n\n                  if (showHead) {\n                    cpx1 -= fHeadSize * (1 - headOffset) / 2 * xSign;\n                    cpx2 += fHeadSize * (1 - headOffset) / 2 * xSign;\n                  }\n\n                  if (showTail) {\n                    cpx1 -= fTailSize * (1 - tailOffset) / 2 * xSign;\n                    cpx2 += fTailSize * (1 - tailOffset) / 2 * xSign;\n                  }\n                },\n                vv: function () {\n                  cpy1 += (absDy * gridBreak.relative + gridBreak.abs) * ySign;\n                  cpy2 -= (absDy * (1 - gridBreak.relative) - gridBreak.abs) * ySign;\n\n                  if (showHead) {\n                    cpy1 -= fHeadSize * (1 - headOffset) / 2 * ySign;\n                    cpy2 += fHeadSize * (1 - headOffset) / 2 * ySign;\n                  }\n\n                  if (showTail) {\n                    cpy1 -= fTailSize * (1 - tailOffset) / 2 * ySign;\n                    cpy2 += fTailSize * (1 - tailOffset) / 2 * ySign;\n                  }\n                },\n                hv: function () {\n                  cpx1 = x2;\n                },\n                vh: function () {\n                  cpy1 = y2;\n                }\n              };\n            } // smart select best curve for the current anchors\n\n            var selectedCurviness = '';\n            if (['left', 'right'].includes(startAnchorPosition)) selectedCurviness += 'h';else if (['bottom', 'top'].includes(startAnchorPosition)) selectedCurviness += 'v';else if (startAnchorPosition === 'middle') selectedCurviness += 'm';\n            if (['left', 'right'].includes(endAnchorPosition)) selectedCurviness += 'h';else if (['bottom', 'top'].includes(endAnchorPosition)) selectedCurviness += 'v';else if (endAnchorPosition === 'middle') selectedCurviness += 'm';\n            if (absDx > absDy) selectedCurviness = selectedCurviness.replace(/m/g, 'h');else selectedCurviness = selectedCurviness.replace(/m/g, 'v');\n            curvesPossibilities[selectedCurviness]();\n            cpx1 += _cpx1Offset;\n            cpy1 += _cpy1Offset;\n            cpx2 += _cpx2Offset;\n            cpy2 += _cpy2Offset; ////////////////////////////////////\n            // canvas smart size adjustments\n\n            var _h = buzzier_1.buzzierMinSols(x1, cpx1, cpx2, x2),\n                xSol1 = _h[0],\n                xSol2 = _h[1];\n\n            var _j = buzzier_1.buzzierMinSols(y1, cpy1, cpy2, y2),\n                ySol1 = _j[0],\n                ySol2 = _j[1];\n\n            if (xSol1 < 0) excLeft += -xSol1;\n            if (xSol2 > absDx) excRight += xSol2 - absDx;\n            if (ySol1 < 0) excUp += -ySol1;\n            if (ySol2 > absDy) excDown += ySol2 - absDy;\n\n            if (path === 'grid') {\n              excLeft += _calc;\n              excRight += _calc;\n              excUp += _calc;\n              excDown += _calc;\n            }\n\n            x1 += excLeft;\n            x2 += excLeft;\n            y1 += excUp;\n            y2 += excUp;\n            cpx1 += excLeft;\n            cpx2 += excLeft;\n            cpy1 += excUp;\n            cpy2 += excUp;\n            var cw = absDx + excLeft + excRight,\n                ch = absDy + excUp + excDown;\n            cx0 -= excLeft;\n            cy0 -= excUp; //labels\n\n            var bzx = buzzier_1.bzFunction(x1, cpx1, cpx2, x2);\n            var bzy = buzzier_1.bzFunction(y1, cpy1, cpy2, y2);\n            var labelStartPos = {\n              x: bzx(0.01),\n              y: bzy(0.01)\n            };\n            var labelMiddlePos = {\n              x: bzx(0.5),\n              y: bzy(0.5)\n            };\n            var labelEndPos = {\n              x: bzx(0.99),\n              y: bzy(0.99)\n            };\n            var arrowPath;\n\n            if (path === 'grid') {\n              // todo: support gridRadius\n              //  arrowPath = `M ${x1} ${y1} L  ${cpx1 - 10} ${cpy1} a10,10 0 0 1 10,10\n              // L ${cpx2} ${cpy2 - 10} a10,10 0 0 0 10,10 L  ${x2} ${y2}`;\n              arrowPath = \"M \" + x1 + \" \" + y1 + \" L  \" + cpx1 + \" \" + cpy1 + \" L \" + cpx2 + \" \" + cpy2 + \" \" + x2 + \" \" + y2;\n            } else if (path === 'smooth') arrowPath = \"M \" + x1 + \" \" + y1 + \" C \" + cpx1 + \" \" + cpy1 + \", \" + cpx2 + \" \" + cpy2 + \", \" + x2 + \" \" + y2;\n\n            return {\n              cx0: cx0,\n              cy0: cy0,\n              x1: x1,\n              x2: x2,\n              y1: y1,\n              y2: y2,\n              cw: cw,\n              ch: ch,\n              cpx1: cpx1,\n              cpy1: cpy1,\n              cpx2: cpx2,\n              cpy2: cpy2,\n              dx: dx,\n              dy: dy,\n              absDx: absDx,\n              absDy: absDy,\n              headOrient: headOrient,\n              tailOrient: tailOrient,\n              labelStartPos: labelStartPos,\n              labelMiddlePos: labelMiddlePos,\n              labelEndPos: labelEndPos,\n              excLeft: excLeft,\n              excRight: excRight,\n              excUp: excUp,\n              excDown: excDown,\n              headOffset: _headOffset,\n              arrowHeadOffset: arrowHeadOffset,\n              arrowTailOffset: arrowTailOffset,\n              startPoints: startPoints,\n              endPoints: endPoints,\n              mainDivPos: mainDivPos,\n              xSign: xSign,\n              ySign: ySign,\n              lineLength: (_d = (_c = lineRef.current) === null || _c === void 0 ? void 0 : _c.getTotalLength()) !== null && _d !== void 0 ? _d : 0,\n              fHeadSize: fHeadSize,\n              fTailSize: fTailSize,\n              arrowPath: arrowPath\n            };\n          };\n\n          exports.getPosition = getPosition;\n          /***/\n        },\n\n        /***/\n        \"./src/Xarrow/utils/index.ts\":\n        /*!***********************************!*\\\n          !*** ./src/Xarrow/utils/index.ts ***!\n          \\***********************************/\n\n        /***/\n        function (__unused_webpack_module, exports) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.getSvgPos = exports.getElemPos = exports.getShortestLine = exports.xStr2absRelative = exports.factorDpathStr = exports.getElementByPropGiven = void 0;\n\n          var getElementByPropGiven = function (ref) {\n            var myRef;\n\n            if (typeof ref === 'string') {\n              // myRef = document.getElementById(ref);\n              myRef = document.getElementById(ref);\n            } else myRef = ref === null || ref === void 0 ? void 0 : ref.current;\n\n            return myRef;\n          };\n\n          exports.getElementByPropGiven = getElementByPropGiven; // receives string representing a d path and factoring only the numbers\n\n          var factorDpathStr = function (d, factor) {\n            var l = d.split(/(\\d+(?:\\.\\d+)?)/);\n            l = l.map(function (s) {\n              if (Number(s)) return (Number(s) * factor).toString();else return s;\n            });\n            return l.join('');\n          };\n\n          exports.factorDpathStr = factorDpathStr; // return relative,abs\n\n          var xStr2absRelative = function (str) {\n            if (typeof str !== 'string') return {\n              abs: 0,\n              relative: 0.5\n            };\n            var sp = str.split('%');\n            var absLen = 0,\n                percentLen = 0;\n\n            if (sp.length == 1) {\n              var p = parseFloat(sp[0]);\n\n              if (!isNaN(p)) {\n                absLen = p;\n                return {\n                  abs: absLen,\n                  relative: 0\n                };\n              }\n            } else if (sp.length == 2) {\n              var _a = [parseFloat(sp[0]), parseFloat(sp[1])],\n                  p1 = _a[0],\n                  p2 = _a[1];\n              if (!isNaN(p1)) percentLen = p1 / 100;\n              if (!isNaN(p2)) absLen = p2;\n              if (!isNaN(p1) || !isNaN(p2)) return {\n                abs: absLen,\n                relative: percentLen\n              };\n            }\n          };\n\n          exports.xStr2absRelative = xStr2absRelative;\n\n          var dist = function (p1, p2) {\n            //length of line\n            return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n          };\n\n          var getShortestLine = function (sPoints, ePoints) {\n            // closes tPair Of Points which feet to the specified anchors\n            var minDist = Infinity,\n                d = Infinity;\n            var closestPair;\n            sPoints.forEach(function (sp) {\n              ePoints.forEach(function (ep) {\n                d = dist(sp, ep);\n\n                if (d < minDist) {\n                  minDist = d;\n                  closestPair = {\n                    chosenStart: sp,\n                    chosenEnd: ep\n                  };\n                }\n              });\n            });\n            return closestPair;\n          };\n\n          exports.getShortestLine = getShortestLine;\n\n          var getElemPos = function (elem) {\n            if (!elem) return {\n              x: 0,\n              y: 0,\n              right: 0,\n              bottom: 0\n            };\n            var pos = elem.getBoundingClientRect();\n            return {\n              x: pos.left,\n              y: pos.top,\n              right: pos.right,\n              bottom: pos.bottom\n            };\n          };\n\n          exports.getElemPos = getElemPos;\n\n          var getSvgPos = function (svgRef) {\n            if (!svgRef.current) return {\n              x: 0,\n              y: 0\n            };\n\n            var _a = svgRef.current.getBoundingClientRect(),\n                xarrowElemX = _a.left,\n                xarrowElemY = _a.top;\n\n            var xarrowStyle = getComputedStyle(svgRef.current);\n            var xarrowStyleLeft = Number(xarrowStyle.left.slice(0, -2));\n            var xarrowStyleTop = Number(xarrowStyle.top.slice(0, -2));\n            return {\n              x: xarrowElemX - xarrowStyleLeft,\n              y: xarrowElemY - xarrowStyleTop\n            };\n          };\n\n          exports.getSvgPos = getSvgPos;\n          /***/\n        },\n\n        /***/\n        \"./src/Xwrapper.tsx\":\n        /*!**************************!*\\\n          !*** ./src/Xwrapper.tsx ***!\n          \\**************************/\n\n        /***/\n        function (__unused_webpack_module, exports, __webpack_require__) {\n          var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n            if (k2 === undefined) k2 = k;\n            Object.defineProperty(o, k2, {\n              enumerable: true,\n              get: function () {\n                return m[k];\n              }\n            });\n          } : function (o, m, k, k2) {\n            if (k2 === undefined) k2 = k;\n            o[k2] = m[k];\n          });\n\n          var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n            Object.defineProperty(o, \"default\", {\n              enumerable: true,\n              value: v\n            });\n          } : function (o, v) {\n            o[\"default\"] = v;\n          });\n\n          var __importStar = this && this.__importStar || function (mod) {\n            if (mod && mod.__esModule) return mod;\n            var result = {};\n            if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n            __setModuleDefault(result, mod);\n\n            return result;\n          };\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.XarrowContext = exports.XelemContext = void 0;\n\n          var react_1 = __importStar(__webpack_require__(\n          /*! react */\n          \"react\"));\n\n          exports.XelemContext = react_1.default.createContext(null);\n          exports.XarrowContext = react_1.default.createContext(null);\n          var updateRef = {};\n          var updateRefCount = 0;\n          var log = console.log;\n\n          var XarrowProvider = function (_a) {\n            var children = _a.children,\n                instanceCount = _a.instanceCount;\n\n            var _b = react_1.useState({}),\n                setRender = _b[1];\n\n            var updateXarrow = function () {\n              return setRender({});\n            };\n\n            react_1.useEffect(function () {\n              instanceCount.current = updateRefCount; // so this instance would know what is id\n\n              updateRef[instanceCount.current] = updateXarrow;\n            }, []); // log('XarrowProvider', updateRefCount);\n\n            return react_1.default.createElement(exports.XarrowContext.Provider, {\n              value: updateXarrow\n            }, children);\n          };\n\n          var XelemProvider = function (_a) {\n            var children = _a.children,\n                instanceCount = _a.instanceCount;\n            return react_1.default.createElement(exports.XelemContext.Provider, {\n              value: updateRef[instanceCount.current]\n            }, children);\n          };\n\n          var Xwrapper = function (_a) {\n            var children = _a.children;\n            var instanceCount = react_1.useRef(updateRefCount);\n\n            var _b = react_1.useState({}),\n                setRender = _b[1];\n\n            react_1.useEffect(function () {\n              updateRefCount++;\n              setRender({});\n              return function () {\n                delete updateRef[instanceCount.current];\n              };\n            }, []);\n            return react_1.default.createElement(XelemProvider, {\n              instanceCount: instanceCount\n            }, react_1.default.createElement(XarrowProvider, {\n              instanceCount: instanceCount\n            }, children));\n          };\n\n          exports.default = Xwrapper;\n          /***/\n        },\n\n        /***/\n        \"./src/constants.tsx\":\n        /*!***************************!*\\\n          !*** ./src/constants.tsx ***!\n          \\***************************/\n\n        /***/\n        function (__unused_webpack_module, exports, __webpack_require__) {\n          var __importDefault = this && this.__importDefault || function (mod) {\n            return mod && mod.__esModule ? mod : {\n              \"default\": mod\n            };\n          };\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.cArrowShapes = exports.arrowShapes = exports.cSvgElems = exports.cPaths = exports.cAnchorEdge = void 0; // constants used for typescript and proptypes definitions\n\n          var react_1 = __importDefault(__webpack_require__(\n          /*! react */\n          \"react\"));\n\n          exports.cAnchorEdge = ['middle', 'left', 'right', 'top', 'bottom', 'auto'];\n          exports.cPaths = ['smooth', 'grid', 'straight'];\n          exports.cSvgElems = ['circle', 'ellipse', 'line', 'path', 'polygon', 'polyline', 'rect']; //default arrows svgs\n\n          exports.arrowShapes = {\n            arrow1: {\n              svgElem: react_1.default.createElement(\"path\", {\n                d: \"M 0 0 L 1 0.5 L 0 1 L 0.25 0.5 z\"\n              }),\n              offsetForward: 0.25\n            },\n            heart: {\n              svgElem: react_1.default.createElement(\"path\", {\n                d: \"M 0,0.25 A 0.125,0.125 0,0,1 0.5,0.25 A 0.125,0.125 0,0,1 1,0.25 Q 1,0.625 0.5,1 Q 0,0.625 0,0.25 z\"\n              }),\n              offsetForward: 0.1\n            },\n            circle: {\n              svgElem: react_1.default.createElement(\"circle\", {\n                r: 0.5,\n                cx: 0.5,\n                cy: 0.5\n              }),\n              offsetForward: 0\n            }\n          };\n          exports.cArrowShapes = Object.keys(exports.arrowShapes);\n          /***/\n        },\n\n        /***/\n        \"./src/index.tsx\":\n        /*!***********************!*\\\n          !*** ./src/index.tsx ***!\n          \\***********************/\n\n        /***/\n        function (__unused_webpack_module, exports, __webpack_require__) {\n          var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n            if (k2 === undefined) k2 = k;\n            Object.defineProperty(o, k2, {\n              enumerable: true,\n              get: function () {\n                return m[k];\n              }\n            });\n          } : function (o, m, k, k2) {\n            if (k2 === undefined) k2 = k;\n            o[k2] = m[k];\n          });\n\n          var __exportStar = this && this.__exportStar || function (m, exports) {\n            for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n          };\n\n          var __importDefault = this && this.__importDefault || function (mod) {\n            return mod && mod.__esModule ? mod : {\n              \"default\": mod\n            };\n          };\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.useXarrow = exports.Xwrapper = exports.default = void 0;\n\n          var Xarrow_1 = __webpack_require__(\n          /*! ./Xarrow/Xarrow */\n          \"./src/Xarrow/Xarrow.tsx\");\n\n          Object.defineProperty(exports, \"default\", {\n            enumerable: true,\n            get: function () {\n              return __importDefault(Xarrow_1).default;\n            }\n          });\n\n          __exportStar(__webpack_require__(\n          /*! ./types */\n          \"./src/types.ts\"), exports);\n\n          __exportStar(__webpack_require__(\n          /*! ./constants */\n          \"./src/constants.tsx\"), exports);\n\n          var Xwrapper_1 = __webpack_require__(\n          /*! ./Xwrapper */\n          \"./src/Xwrapper.tsx\");\n\n          Object.defineProperty(exports, \"Xwrapper\", {\n            enumerable: true,\n            get: function () {\n              return __importDefault(Xwrapper_1).default;\n            }\n          });\n\n          var useXarrow_1 = __webpack_require__(\n          /*! ./useXarrow */\n          \"./src/useXarrow.tsx\");\n\n          Object.defineProperty(exports, \"useXarrow\", {\n            enumerable: true,\n            get: function () {\n              return __importDefault(useXarrow_1).default;\n            }\n          });\n          /***/\n        },\n\n        /***/\n        \"./src/types.ts\":\n        /*!**********************!*\\\n          !*** ./src/types.ts ***!\n          \\**********************/\n\n        /***/\n        function (__unused_webpack_module, exports) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          /***/\n        },\n\n        /***/\n        \"./src/useXarrow.tsx\":\n        /*!***************************!*\\\n          !*** ./src/useXarrow.tsx ***!\n          \\***************************/\n\n        /***/\n        function (__unused_webpack_module, exports, __webpack_require__) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n\n          var react_1 = __webpack_require__(\n          /*! react */\n          \"react\");\n\n          var Xwrapper_1 = __webpack_require__(\n          /*! ./Xwrapper */\n          \"./src/Xwrapper.tsx\");\n\n          var useXarrow = function () {\n            var _a = react_1.useState({}),\n                setRender = _a[1];\n\n            var reRender = function () {\n              return setRender({});\n            };\n\n            var updateXarrow = react_1.useContext(Xwrapper_1.XelemContext);\n            if (!updateXarrow) updateXarrow = function () {}; // throw new Error(\n            //   \"'Xwrapper' is required around element using 'useXarrow' hook! wrap your xarrows and connected elements with Xwrapper! \"\n            // );\n\n            react_1.useLayoutEffect(function () {\n              updateXarrow();\n            });\n            return reRender;\n          };\n\n          exports.default = useXarrow;\n          /***/\n        },\n\n        /***/\n        \"lodash\":\n        /*!*************************!*\\\n          !*** external \"lodash\" ***!\n          \\*************************/\n\n        /***/\n        function (module) {\n          module.exports = __WEBPACK_EXTERNAL_MODULE_lodash__;\n          /***/\n        },\n\n        /***/\n        \"prop-types\":\n        /*!*****************************!*\\\n          !*** external \"prop-types\" ***!\n          \\*****************************/\n\n        /***/\n        function (module) {\n          module.exports = __WEBPACK_EXTERNAL_MODULE_prop_types__;\n          /***/\n        },\n\n        /***/\n        \"react\":\n        /*!************************!*\\\n          !*** external \"react\" ***!\n          \\************************/\n\n        /***/\n        function (module) {\n          module.exports = __WEBPACK_EXTERNAL_MODULE_react__;\n          /***/\n        }\n        /******/\n\n      };\n      /************************************************************************/\n\n      /******/\n      // The module cache\n\n      /******/\n\n      var __webpack_module_cache__ = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n        // Check if module is in cache\n\n        /******/\n        var cachedModule = __webpack_module_cache__[moduleId];\n        /******/\n\n        if (cachedModule !== undefined) {\n          /******/\n          return cachedModule.exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = __webpack_module_cache__[moduleId] = {\n          /******/\n          id: moduleId,\n\n          /******/\n          loaded: false,\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        __webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Flag the module as loaded\n\n        /******/\n\n\n        module.loaded = true;\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /******/\n      // expose the module cache\n\n      /******/\n\n\n      __webpack_require__.c = __webpack_module_cache__;\n      /******/\n\n      /************************************************************************/\n\n      /******/\n\n      /* webpack/runtime/define property getters */\n\n      /******/\n\n      !function () {\n        /******/\n        // define getter functions for harmony exports\n\n        /******/\n        __webpack_require__.d = function (exports, definition) {\n          /******/\n          for (var key in definition) {\n            /******/\n            if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n              /******/\n              Object.defineProperty(exports, key, {\n                enumerable: true,\n                get: definition[key]\n              });\n              /******/\n            }\n            /******/\n\n          }\n          /******/\n\n        };\n        /******/\n\n      }();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/hasOwnProperty shorthand */\n\n      /******/\n\n      !function () {\n        /******/\n        __webpack_require__.o = function (obj, prop) {\n          return Object.prototype.hasOwnProperty.call(obj, prop);\n        };\n        /******/\n\n      }();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/make namespace object */\n\n      /******/\n\n      !function () {\n        /******/\n        // define __esModule on exports\n\n        /******/\n        __webpack_require__.r = function (exports) {\n          /******/\n          if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n            /******/\n            Object.defineProperty(exports, Symbol.toStringTag, {\n              value: 'Module'\n            });\n            /******/\n          }\n          /******/\n\n\n          Object.defineProperty(exports, '__esModule', {\n            value: true\n          });\n          /******/\n        };\n        /******/\n\n      }();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/node module decorator */\n\n      /******/\n\n      !function () {\n        /******/\n        __webpack_require__.nmd = function (module) {\n          /******/\n          module.paths = [];\n          /******/\n\n          if (!module.children) module.children = [];\n          /******/\n\n          return module;\n          /******/\n        };\n        /******/\n\n      }();\n      /******/\n\n      /************************************************************************/\n\n      /******/\n\n      /******/\n      // module cache are used so entry inlining is disabled\n\n      /******/\n      // startup\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n\n      var __webpack_exports__ = __webpack_require__(__webpack_require__.s = \"./src/index.tsx\");\n      /******/\n\n      /******/\n\n\n      return __webpack_exports__;\n      /******/\n    }()\n  );\n});","map":{"version":3,"sources":["C:/Users/yonil/my-app/node_modules/react-xarrows/lib/index.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","require","define","amd","__WEBPACK_EXTERNAL_MODULE_react__","__WEBPACK_EXTERNAL_MODULE_lodash__","__WEBPACK_EXTERNAL_MODULE_prop_types__","__webpack_modules__","__unused_webpack_module","__webpack_exports__","__webpack_require__","r","d","bzFunction","buzzierMinSols","p1","p2","p3","p4","t","Math","pow","bz","A","B","C","sol1","sqrt","sol2","__assign","Object","assign","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","__spreadArray","to","from","il","j","__importDefault","react_1","useXarrowProps_1","Xwrapper_1","propTypes_1","GetPosition_1","log","console","Xarrow","props","_a","mainRef","useRef","svgRef","lineRef","headRef","tailRef","lineDrawAnimRef","lineDashAnimRef","headOpacityAnimRef","_b","current","useContext","XarrowContext","xProps","default","propsRefs","labels","lineColor","headColor","tailColor","strokeWidth","showHead","showTail","dashness","headShape","tailShape","showXarrow","animateDrawing","zIndex","passProps","arrowBodyProps","arrowHeadProps","arrowTailProps","SVGcanvasProps","divContainerProps","divContainerStyle","SVGcanvasStyle","_debug","shouldUpdatePosition","_c","useState","drawAnimEnded","setDrawAnimEnded","_d","setRender","forceRerender","_e","cx0","cy0","cw","ch","x1","y1","x2","y2","dx","dy","absDx","absDy","cpx1","cpy1","cpx2","cpy2","headOrient","tailOrient","arrowHeadOffset","x","y","arrowTailOffset","headOffset","excRight","excLeft","excUp","excDown","startPoints","endPoints","mainDivPos","xSign","ySign","lineLength","fHeadSize","fTailSize","arrowPath","labelStartPos","labelMiddlePos","labelEndPos","st","setSt","useLayoutEffect","pos","getPosition","xOffsetHead","yOffsetHead","xOffsetTail","yOffsetTail","dashoffset","strokeLen","nonStrokeLen","animDirection","animation","dashArray","animRepeatCount","animStartValue","animEndValue","prevSt","getTotalLength","useEffect","monitorDOMchanges","window","addEventListener","handleDrawAmimEnd","beginElement","handleDrawAmimBegin","style","opacity","removeEventListener","cleanMonitorDOMchanges","createElement","position","Fragment","ref","width","height","left","top","pointerEvents","border","overflow","stroke","strokeDasharray","fill","attributeName","values","dur","repeatCount","id","transform","svgElem","begin","cx","cy","start","middle","display","end","map","key","background","borderRadius","propTypes","nmd","calcAnchors","getAnchorsDefaultOffsets","right","bottom","anchors","anchorPos","anchor","defsOffsets","offset","c","prop_types_1","constants_1","pAnchorPositionType","oneOf","cAnchorEdge","pAnchorCustomPositionType","exact","isRequired","number","_pAnchorType","oneOfType","pAnchorType","arrayOf","pRefType","string","any","_pLabelType","element","pLabelsType","pSvgEdgeShapeType","keys","arrowShapes","pSvgElemType","pSvgEdgeType","offsetForward","XarrowPropTypes","startAnchor","endAnchor","color","bool","headSize","tailSize","path","cPaths","curveness","gridBreak","object","_extendSVGcanvas","_cpx1Offset","_cpy1Offset","_cpx2Offset","_cpy2Offset","utils_1","lodash_1","parseLabels","label","parsedLabel","isValidElement","parseAnchor","anchorChoice","Array","isArray","anchorChoice2","filter","an","includes","autosAncs","push","flatMap","anchorObj","anchorName","anchorChoice3","anchorChoiceCustom","parseDashness","dashStroke","dashNone","animDashSpeed","parseEdgeShape","svgEdge","warn","cArrowShapes","parseGridBreak","resGridBreak","xStr2absRelative","relative","abs","withUpdate","propVal","updateRef","noParse","userProp","noParseWithUpdatePos","_","updatePos","parseNumWithUpdatePos","Number","parseNum","parsePropsFuncs","getElementByPropGiven","propsDeps","propName","_i","parseGivenProps","propsRef","entries","name_1","val","defaultProps","initialParsedProps","initialValVars","startPos","endPos","deepCompareEquals","a","b","isEqual","useDeepCompareMemoize","useDeepCompareEffect","callback","dependencies","useXarrowProps","userProps","refs","setPropsRefs","curProps","_loop_1","name","valVars","setValVars","getElemPos","anchors_1","index_1","buzzier_1","_f","getShortestLine","chosenStart","chosenEnd","startAnchorPosition","endAnchorPosition","startPoint","pick","endPoint","getSvgPos","min","_g","tailOffset","xHeadOffset","yHeadOffset","xTailOffset","yTailOffset","_headOffset","_tailOffset","cu","biggerSide","_calc","headAngel","atan","cos","sin","PI","tailAngel","curvesPossibilities","hh","vv","hv","vh","selectedCurviness","replace","_h","xSol1","xSol2","_j","ySol1","ySol2","bzx","bzy","factorDpathStr","myRef","document","getElementById","factor","l","split","toString","join","str","sp","absLen","percentLen","parseFloat","isNaN","dist","sPoints","ePoints","minDist","Infinity","closestPair","forEach","ep","elem","getBoundingClientRect","xarrowElemX","xarrowElemY","xarrowStyle","getComputedStyle","xarrowStyleLeft","slice","xarrowStyleTop","XelemContext","createContext","updateRefCount","XarrowProvider","children","instanceCount","updateXarrow","Provider","XelemProvider","Xwrapper","cSvgElems","arrow1","heart","circle","__exportStar","useXarrow","Xarrow_1","useXarrow_1","reRender","__webpack_module_cache__","moduleId","cachedModule","loaded","definition","obj","prop","Symbol","toStringTag","paths"],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"lodash\"), require(\"prop-types\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"reactXarrow\", [\"react\", \"lodash\", \"prop-types\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"reactXarrow\"] = factory(require(\"react\"), require(\"lodash\"), require(\"prop-types\"));\n\telse\n\t\troot[\"reactXarrow\"] = factory(root[\"react\"], root[\"lodash\"], root[\"prop-types\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_react__, __WEBPACK_EXTERNAL_MODULE_lodash__, __WEBPACK_EXTERNAL_MODULE_prop_types__) {\nreturn /******/ (function() { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./src/Xarrow/utils/buzzier.js\":\n/*!*************************************!*\\\n  !*** ./src/Xarrow/utils/buzzier.js ***!\n  \\*************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"bzFunction\": function() { return /* binding */ bzFunction; },\n/* harmony export */   \"buzzierMinSols\": function() { return /* binding */ buzzierMinSols; }\n/* harmony export */ });\n// Buzier curve calculations\n\n/**\r\n * returns buzzier curve function with 2 controls points\r\n * bzCurve with 2 control points function(4 points total):  bz = (1−t)^3*p1 + 3(1−t)^2*t*p2 +3(1−t)*t^2*p3 + t^3*p4\r\n */\nvar bzFunction = function bzFunction(p1, p2, p3, p4) {\n  return function (t) {\n    return Math.pow(1 - t, 3) * p1 + 3 * Math.pow(1 - t, 2) * t * p2 + 3 * (1 - t) * Math.pow(t, 2) * p3 + Math.pow(t, 3) * p4;\n  };\n};\n/**\r\n * returns 2 solutions from extram points for buzzier curve with 2 controls points\r\n */\n\nvar buzzierMinSols = function buzzierMinSols(p1, p2, p3, p4) {\n  var bz = bzFunction(p1, p2, p3, p4); // dt(bz) = -3 p1 (1 - t)^2 + 3 p2 (1 - t)^2 - 6 p2 (1 - t) t + 6 p3 (1 - t) t - 3 p3 t^2 + 3 p4 t^2\n  // when p1=(x1,y1),p2=(cpx1,cpy1),p3=(cpx2,cpy2),p4=(x2,y2)\n  // then extrema points is when dt(bz) = 0\n  // solutions =>  t = ((-6 p1 + 12 p2 - 6 p3) ± sqrt((6 p1 - 12 p2 + 6 p3)^2 - 4 (3 p2 - 3 p1) (-3 p1 + 9 p2 - 9 p3 + 3 p4)))/(2 (-3 p1 + 9 p2 - 9 p3 + 3 p4))  when (p1 + 3 p3!=3 p2 + p4)\n  // if we mark A=(-6 p1 + 12 p2 - 6 p3) and B=(6 p1 - 12 p2 + 6 p3)^2 - 4 (3 p2 - 3 p1) (-3 p1 + 9 p2 - 9 p3 + 3 p4)) and C =(2 (-3 p1 + 9 p2 - 9 p3 + 3 p4) then\n  // tSol = A ± sqrt(B)\n  // then solution we want is: bz(tSol)\n\n  var A = -6 * p1 + 12 * p2 - 6 * p3;\n  var B = Math.pow(-6 * p1 + 12 * p2 - 6 * p3, 2) - 4 * (3 * p2 - 3 * p1) * (-3 * p1 + 9 * p2 - 9 * p3 + 3 * p4);\n  var C = 2 * (-3 * p1 + 9 * p2 - 9 * p3 + 3 * p4);\n  var sol1 = bz((A + Math.sqrt(B)) / C);\n  var sol2 = bz((A - Math.sqrt(B)) / C);\n  return [sol1, sol2];\n};\n\n/***/ }),\n\n/***/ \"./src/Xarrow/Xarrow.tsx\":\n/*!*******************************!*\\\n  !*** ./src/Xarrow/Xarrow.tsx ***!\n  \\*******************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nvar react_1 = __importStar(__webpack_require__(/*! react */ \"react\"));\r\nvar useXarrowProps_1 = __importDefault(__webpack_require__(/*! ./useXarrowProps */ \"./src/Xarrow/useXarrowProps.ts\"));\r\nvar Xwrapper_1 = __webpack_require__(/*! ../Xwrapper */ \"./src/Xwrapper.tsx\");\r\nvar propTypes_1 = __importDefault(__webpack_require__(/*! ./propTypes */ \"./src/Xarrow/propTypes.ts\"));\r\nvar GetPosition_1 = __webpack_require__(/*! ./utils/GetPosition */ \"./src/Xarrow/utils/GetPosition.tsx\");\r\nvar log = console.log;\r\nvar Xarrow = function (props) {\r\n    // log('xarrow update');\r\n    var _a;\r\n    var mainRef = react_1.useRef({\r\n        svgRef: react_1.useRef(null),\r\n        lineRef: react_1.useRef(null),\r\n        headRef: react_1.useRef(null),\r\n        tailRef: react_1.useRef(null),\r\n        lineDrawAnimRef: react_1.useRef(null),\r\n        lineDashAnimRef: react_1.useRef(null),\r\n        headOpacityAnimRef: react_1.useRef(null),\r\n    });\r\n    var _b = mainRef.current, svgRef = _b.svgRef, lineRef = _b.lineRef, headRef = _b.headRef, tailRef = _b.tailRef, lineDrawAnimRef = _b.lineDrawAnimRef, lineDashAnimRef = _b.lineDashAnimRef, headOpacityAnimRef = _b.headOpacityAnimRef;\r\n    react_1.useContext(Xwrapper_1.XarrowContext);\r\n    var xProps = useXarrowProps_1.default(props, mainRef.current);\r\n    var propsRefs = xProps[0];\r\n    var labels = propsRefs.labels, lineColor = propsRefs.lineColor, headColor = propsRefs.headColor, tailColor = propsRefs.tailColor, strokeWidth = propsRefs.strokeWidth, showHead = propsRefs.showHead, showTail = propsRefs.showTail, dashness = propsRefs.dashness, headShape = propsRefs.headShape, tailShape = propsRefs.tailShape, showXarrow = propsRefs.showXarrow, animateDrawing = propsRefs.animateDrawing, zIndex = propsRefs.zIndex, passProps = propsRefs.passProps, arrowBodyProps = propsRefs.arrowBodyProps, arrowHeadProps = propsRefs.arrowHeadProps, arrowTailProps = propsRefs.arrowTailProps, SVGcanvasProps = propsRefs.SVGcanvasProps, divContainerProps = propsRefs.divContainerProps, divContainerStyle = propsRefs.divContainerStyle, SVGcanvasStyle = propsRefs.SVGcanvasStyle, _debug = propsRefs._debug, shouldUpdatePosition = propsRefs.shouldUpdatePosition;\r\n    animateDrawing = props.animateDrawing;\r\n    var _c = react_1.useState(!animateDrawing), drawAnimEnded = _c[0], setDrawAnimEnded = _c[1];\r\n    var _d = react_1.useState({}), setRender = _d[1];\r\n    var forceRerender = function () { return setRender({}); };\r\n    var _e = react_1.useState({\r\n        //initial state\r\n        cx0: 0,\r\n        cy0: 0,\r\n        cw: 0,\r\n        ch: 0,\r\n        x1: 0,\r\n        y1: 0,\r\n        x2: 0,\r\n        y2: 0,\r\n        dx: 0,\r\n        dy: 0,\r\n        absDx: 0,\r\n        absDy: 0,\r\n        cpx1: 0,\r\n        cpy1: 0,\r\n        cpx2: 0,\r\n        cpy2: 0,\r\n        headOrient: 0,\r\n        tailOrient: 0,\r\n        arrowHeadOffset: { x: 0, y: 0 },\r\n        arrowTailOffset: { x: 0, y: 0 },\r\n        headOffset: 0,\r\n        excRight: 0,\r\n        excLeft: 0,\r\n        excUp: 0,\r\n        excDown: 0,\r\n        startPoints: [],\r\n        endPoints: [],\r\n        mainDivPos: { x: 0, y: 0 },\r\n        xSign: 1,\r\n        ySign: 1,\r\n        lineLength: 0,\r\n        fHeadSize: 1,\r\n        fTailSize: 1,\r\n        arrowPath: \"\",\r\n        labelStartPos: { x: 0, y: 0 },\r\n        labelMiddlePos: { x: 0, y: 0 },\r\n        labelEndPos: { x: 0, y: 0 },\r\n    }), st = _e[0], setSt = _e[1];\r\n    /**\r\n     * The Main logic of path calculation for the arrow.\r\n     * calculate new path, adjusting canvas, and set state based on given properties.\r\n     * */\r\n    react_1.useLayoutEffect(function () {\r\n        if (shouldUpdatePosition.current) {\r\n            // log('xarrow getPosition');\r\n            var pos = GetPosition_1.getPosition(xProps, mainRef);\r\n            // log('pos', pos);\r\n            setSt(pos);\r\n            shouldUpdatePosition.current = false;\r\n        }\r\n    });\r\n    // log('st', st);\r\n    var xOffsetHead = st.x2 - st.arrowHeadOffset.x;\r\n    var yOffsetHead = st.y2 - st.arrowHeadOffset.y;\r\n    var xOffsetTail = st.x1 - st.arrowTailOffset.x;\r\n    var yOffsetTail = st.y1 - st.arrowTailOffset.y;\r\n    var dashoffset = dashness.strokeLen + dashness.nonStrokeLen;\r\n    var animDirection = 1;\r\n    if (dashness.animation < 0) {\r\n        dashness.animation *= -1;\r\n        animDirection = -1;\r\n    }\r\n    var dashArray, animation, animRepeatCount, animStartValue, animEndValue = 0;\r\n    if (animateDrawing && drawAnimEnded == false) {\r\n        if (typeof animateDrawing === 'boolean')\r\n            animateDrawing = 1;\r\n        animation = animateDrawing + 's';\r\n        dashArray = st.lineLength;\r\n        animStartValue = st.lineLength;\r\n        animRepeatCount = 1;\r\n        if (animateDrawing < 0) {\r\n            _a = [animEndValue, animStartValue], animStartValue = _a[0], animEndValue = _a[1];\r\n            animation = animateDrawing * -1 + 's';\r\n        }\r\n    }\r\n    else {\r\n        dashArray = dashness.strokeLen + \" \" + dashness.nonStrokeLen;\r\n        animation = 1 / dashness.animation + \"s\";\r\n        animStartValue = dashoffset * animDirection;\r\n        animRepeatCount = 'indefinite';\r\n        animEndValue = 0;\r\n    }\r\n    // handle draw animation\r\n    react_1.useLayoutEffect(function () {\r\n        if (lineRef.current)\r\n            setSt(function (prevSt) { var _a, _b; return (__assign(__assign({}, prevSt), { lineLength: (_b = (_a = lineRef.current) === null || _a === void 0 ? void 0 : _a.getTotalLength()) !== null && _b !== void 0 ? _b : 0 })); });\r\n    }, [lineRef.current]);\r\n    // set all props on first render\r\n    react_1.useEffect(function () {\r\n        var monitorDOMchanges = function () {\r\n            window.addEventListener('resize', forceRerender);\r\n            var handleDrawAmimEnd = function () {\r\n                var _a, _b;\r\n                setDrawAnimEnded(true);\r\n                // @ts-ignore\r\n                (_a = headOpacityAnimRef.current) === null || _a === void 0 ? void 0 : _a.beginElement();\r\n                // @ts-ignore\r\n                (_b = lineDashAnimRef.current) === null || _b === void 0 ? void 0 : _b.beginElement();\r\n            };\r\n            var handleDrawAmimBegin = function () { return (headRef.current.style.opacity = '0'); };\r\n            if (lineDrawAnimRef.current && headRef.current) {\r\n                lineDrawAnimRef.current.addEventListener('endEvent', handleDrawAmimEnd);\r\n                lineDrawAnimRef.current.addEventListener('beginEvent', handleDrawAmimBegin);\r\n            }\r\n            return function () {\r\n                window.removeEventListener('resize', forceRerender);\r\n                if (lineDrawAnimRef.current) {\r\n                    lineDrawAnimRef.current.removeEventListener('endEvent', handleDrawAmimEnd);\r\n                    if (headRef.current)\r\n                        lineDrawAnimRef.current.removeEventListener('beginEvent', handleDrawAmimBegin);\r\n                }\r\n            };\r\n        };\r\n        var cleanMonitorDOMchanges = monitorDOMchanges();\r\n        return function () {\r\n            setDrawAnimEnded(false);\r\n            cleanMonitorDOMchanges();\r\n        };\r\n    }, [showXarrow]);\r\n    //todo: could make some advanced generic typescript inferring. for example get type from headShape.elem:T and\r\n    // tailShape.elem:K force the type for passProps,arrowHeadProps,arrowTailProps property. for now `as any` is used to\r\n    // avoid typescript conflicts\r\n    // so todo- fix all the `passProps as any` assertions\r\n    return (react_1.default.createElement(\"div\", __assign({}, divContainerProps, { style: __assign({ position: 'absolute', zIndex: zIndex }, divContainerStyle) }), showXarrow ? (react_1.default.createElement(react_1.default.Fragment, null,\r\n        react_1.default.createElement(\"svg\", __assign({ ref: svgRef, width: st.cw, height: st.ch, style: __assign({ position: 'absolute', left: st.cx0, top: st.cy0, pointerEvents: 'none', border: _debug ? '1px dashed yellow' : null }, SVGcanvasStyle), overflow: \"auto\" }, SVGcanvasProps),\r\n            react_1.default.createElement(\"path\", __assign({ ref: lineRef, d: st.arrowPath, stroke: lineColor, strokeDasharray: dashArray, \r\n                // strokeDasharray={'0 0'}\r\n                strokeWidth: strokeWidth, fill: \"transparent\", pointerEvents: \"visibleStroke\" }, passProps, arrowBodyProps),\r\n                react_1.default.createElement(react_1.default.Fragment, null, drawAnimEnded ? (react_1.default.createElement(react_1.default.Fragment, null, dashness.animation ? (react_1.default.createElement(\"animate\", { ref: lineDashAnimRef, attributeName: \"stroke-dashoffset\", values: dashoffset * animDirection + \";0\", dur: 1 / dashness.animation + \"s\", repeatCount: \"indefinite\" })) : null)) : (react_1.default.createElement(react_1.default.Fragment, null, animateDrawing ? (react_1.default.createElement(\"animate\", { ref: lineDrawAnimRef, id: \"svgEndAnimate\", attributeName: \"stroke-dashoffset\", values: animStartValue + \";\" + animEndValue, dur: animation, repeatCount: animRepeatCount })) : null)))),\r\n            showTail ? (react_1.default.createElement(\"g\", __assign({ fill: tailColor, pointerEvents: \"auto\", transform: \"translate(\" + xOffsetTail + \",\" + yOffsetTail + \") rotate(\" + st.tailOrient + \") scale(\" + st.fTailSize + \")\" }, passProps, arrowTailProps), tailShape.svgElem)) : null,\r\n            showHead ? (react_1.default.createElement(\"g\", __assign({ ref: headRef, \r\n                // d={normalArrowShape}\r\n                fill: headColor, pointerEvents: \"auto\", transform: \"translate(\" + xOffsetHead + \",\" + yOffsetHead + \") rotate(\" + st.headOrient + \") scale(\" + st.fHeadSize + \")\", opacity: animateDrawing && !drawAnimEnded ? 0 : 1 }, passProps, arrowHeadProps),\r\n                react_1.default.createElement(\"animate\", { ref: headOpacityAnimRef, dur: '0.4', attributeName: \"opacity\", from: \"0\", to: \"1\", begin: \"indefinite\", repeatCount: \"0\", fill: \"freeze\" }),\r\n                headShape.svgElem)) : null,\r\n            _debug ? (react_1.default.createElement(react_1.default.Fragment, null,\r\n                react_1.default.createElement(\"circle\", { r: \"5\", cx: st.cpx1, cy: st.cpy1, fill: \"green\" }),\r\n                react_1.default.createElement(\"circle\", { r: \"5\", cx: st.cpx2, cy: st.cpy2, fill: \"blue\" }),\r\n                react_1.default.createElement(\"rect\", { x: st.excLeft, y: st.excUp, width: st.absDx, height: st.absDy, fill: \"none\", stroke: \"pink\", strokeWidth: \"2px\" }))) : null),\r\n        labels.start ? (react_1.default.createElement(\"div\", { style: {\r\n                transform: st.dx < 0 ? 'translate(-100% , -50%)' : 'translate(-0% , -50%)',\r\n                width: 'max-content',\r\n                position: 'absolute',\r\n                left: st.cx0 + st.labelStartPos.x,\r\n                top: st.cy0 + st.labelStartPos.y - strokeWidth - 5,\r\n            } }, labels.start)) : null,\r\n        labels.middle ? (react_1.default.createElement(\"div\", { style: {\r\n                display: 'table',\r\n                width: 'max-content',\r\n                transform: 'translate(-50% , -50%)',\r\n                position: 'absolute',\r\n                left: st.cx0 + st.labelMiddlePos.x,\r\n                top: st.cy0 + st.labelMiddlePos.y,\r\n            } }, labels.middle)) : null,\r\n        labels.end ? (react_1.default.createElement(\"div\", { style: {\r\n                transform: st.dx > 0 ? 'translate(-100% , -50%)' : 'translate(-0% , -50%)',\r\n                width: 'max-content',\r\n                position: 'absolute',\r\n                left: st.cx0 + st.labelEndPos.x,\r\n                top: st.cy0 + st.labelEndPos.y + strokeWidth + 5,\r\n            } }, labels.end)) : null,\r\n        _debug ? (react_1.default.createElement(react_1.default.Fragment, null, __spreadArray(__spreadArray([], st.startPoints), st.endPoints).map(function (p, i) {\r\n            return (react_1.default.createElement(\"div\", { key: i, style: {\r\n                    background: 'gray',\r\n                    opacity: 0.5,\r\n                    borderRadius: '50%',\r\n                    transform: 'translate(-50%, -50%)',\r\n                    height: 5,\r\n                    width: 5,\r\n                    position: 'absolute',\r\n                    left: p.x - st.mainDivPos.x,\r\n                    top: p.y - st.mainDivPos.y,\r\n                } }));\r\n        }))) : null)) : null));\r\n};\r\n//////////////////////////////\r\n// propTypes\r\nXarrow.propTypes = propTypes_1.default;\r\nexports.default = Xarrow;\r\n\n\n/***/ }),\n\n/***/ \"./src/Xarrow/anchors.ts\":\n/*!*******************************!*\\\n  !*** ./src/Xarrow/anchors.ts ***!\n  \\*******************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n/* module decorator */ module = __webpack_require__.nmd(module);\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.calcAnchors = void 0;\r\nvar getAnchorsDefaultOffsets = function (width, height) {\r\n    return {\r\n        middle: { x: width * 0.5, y: height * 0.5 },\r\n        left: { x: 0, y: height * 0.5 },\r\n        right: { x: width, y: height * 0.5 },\r\n        top: { x: width * 0.5, y: 0 },\r\n        bottom: { x: width * 0.5, y: height },\r\n    };\r\n};\r\nvar calcAnchors = function (anchors, anchorPos) {\r\n    // now prepare this list of anchors to object expected by the `getShortestLine` function\r\n    return anchors.map(function (anchor) {\r\n        var defsOffsets = getAnchorsDefaultOffsets(anchorPos.right - anchorPos.x, anchorPos.bottom - anchorPos.y);\r\n        var _a = defsOffsets[anchor.position], x = _a.x, y = _a.y;\r\n        return {\r\n            x: anchorPos.x + x + anchor.offset.x,\r\n            y: anchorPos.y + y + anchor.offset.y,\r\n            anchor: anchor,\r\n        };\r\n    });\r\n};\r\nexports.calcAnchors = calcAnchors;\r\nif (__webpack_require__.c[__webpack_require__.s] === module) {\r\n    // const res = parseAnchor(['auto'], {\r\n    //   x: 0,\r\n    //   y: 0,\r\n    //   bottom: 10,\r\n    //   right: 20,\r\n    // });\r\n    // console.log(res);\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./src/Xarrow/propTypes.ts\":\n/*!*********************************!*\\\n  !*** ./src/Xarrow/propTypes.ts ***!\n  \\*********************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nvar prop_types_1 = __importDefault(__webpack_require__(/*! prop-types */ \"prop-types\"));\r\nvar constants_1 = __webpack_require__(/*! ../constants */ \"./src/constants.tsx\");\r\nvar pAnchorPositionType = prop_types_1.default.oneOf(constants_1.cAnchorEdge);\r\nvar pAnchorCustomPositionType = prop_types_1.default.exact({\r\n    position: pAnchorPositionType.isRequired,\r\n    offset: prop_types_1.default.exact({\r\n        x: prop_types_1.default.number,\r\n        y: prop_types_1.default.number,\r\n    }).isRequired,\r\n});\r\nvar _pAnchorType = prop_types_1.default.oneOfType([pAnchorPositionType, pAnchorCustomPositionType]);\r\nvar pAnchorType = prop_types_1.default.oneOfType([_pAnchorType, prop_types_1.default.arrayOf(_pAnchorType)]);\r\nvar pRefType = prop_types_1.default.oneOfType([prop_types_1.default.string, prop_types_1.default.exact({ current: prop_types_1.default.any })]);\r\nvar _pLabelType = prop_types_1.default.oneOfType([prop_types_1.default.element, prop_types_1.default.string]);\r\nvar pLabelsType = prop_types_1.default.exact({\r\n    start: _pLabelType,\r\n    middle: _pLabelType,\r\n    end: _pLabelType,\r\n});\r\nvar pSvgEdgeShapeType = prop_types_1.default.oneOf(Object.keys(constants_1.arrowShapes));\r\n// const pSvgElemType = PT.oneOf(cSvgElems);\r\nvar pSvgElemType = prop_types_1.default.any;\r\nvar pSvgEdgeType = prop_types_1.default.oneOfType([\r\n    pSvgEdgeShapeType,\r\n    prop_types_1.default.exact({\r\n        svgElem: pSvgElemType,\r\n        offsetForward: prop_types_1.default.number,\r\n    }).isRequired,\r\n]);\r\nvar XarrowPropTypes = {\r\n    start: pRefType.isRequired,\r\n    end: pRefType.isRequired,\r\n    startAnchor: pAnchorType,\r\n    endAnchor: pAnchorType,\r\n    labels: prop_types_1.default.oneOfType([_pLabelType, pLabelsType]),\r\n    color: prop_types_1.default.string,\r\n    lineColor: prop_types_1.default.string,\r\n    showHead: prop_types_1.default.bool,\r\n    headColor: prop_types_1.default.string,\r\n    headSize: prop_types_1.default.number,\r\n    tailSize: prop_types_1.default.number,\r\n    tailColor: prop_types_1.default.string,\r\n    strokeWidth: prop_types_1.default.number,\r\n    showTail: prop_types_1.default.bool,\r\n    path: prop_types_1.default.oneOf(constants_1.cPaths),\r\n    showXarrow: prop_types_1.default.bool,\r\n    curveness: prop_types_1.default.number,\r\n    gridBreak: prop_types_1.default.string,\r\n    dashness: prop_types_1.default.oneOfType([prop_types_1.default.bool, prop_types_1.default.object]),\r\n    headShape: pSvgEdgeType,\r\n    tailShape: pSvgEdgeType,\r\n    animateDrawing: prop_types_1.default.oneOfType([prop_types_1.default.bool, prop_types_1.default.number]),\r\n    zIndex: prop_types_1.default.number,\r\n    passProps: prop_types_1.default.object,\r\n    arrowBodyProps: prop_types_1.default.object,\r\n    arrowHeadProps: prop_types_1.default.object,\r\n    arrowTailProps: prop_types_1.default.object,\r\n    SVGcanvasProps: prop_types_1.default.object,\r\n    divContainerProps: prop_types_1.default.object,\r\n    _extendSVGcanvas: prop_types_1.default.number,\r\n    _debug: prop_types_1.default.bool,\r\n    _cpx1Offset: prop_types_1.default.number,\r\n    _cpy1Offset: prop_types_1.default.number,\r\n    _cpx2Offset: prop_types_1.default.number,\r\n    _cpy2Offset: prop_types_1.default.number,\r\n};\r\nexports.default = XarrowPropTypes;\r\n\n\n/***/ }),\n\n/***/ \"./src/Xarrow/useXarrowProps.ts\":\n/*!**************************************!*\\\n  !*** ./src/Xarrow/useXarrowProps.ts ***!\n  \\**************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nvar react_1 = __importStar(__webpack_require__(/*! react */ \"react\"));\r\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./src/Xarrow/utils/index.ts\");\r\nvar lodash_1 = __importDefault(__webpack_require__(/*! lodash */ \"lodash\"));\r\nvar constants_1 = __webpack_require__(/*! ../constants */ \"./src/constants.tsx\");\r\nvar parseLabels = function (label) {\r\n    var parsedLabel = { start: null, middle: null, end: null };\r\n    if (label) {\r\n        if (typeof label === 'string' || react_1.default.isValidElement(label))\r\n            parsedLabel.middle = label;\r\n        else {\r\n            for (var key in label) {\r\n                parsedLabel[key] = label[key];\r\n            }\r\n        }\r\n    }\r\n    return parsedLabel;\r\n};\r\nvar parseAnchor = function (anchor) {\r\n    // convert to array\r\n    var anchorChoice = Array.isArray(anchor) ? anchor : [anchor];\r\n    //convert to array of objects\r\n    var anchorChoice2 = anchorChoice.map(function (anchorChoice) {\r\n        if (typeof anchorChoice === 'string') {\r\n            return { position: anchorChoice };\r\n        }\r\n        else\r\n            return anchorChoice;\r\n    });\r\n    //remove any invalid anchor names\r\n    anchorChoice2 = anchorChoice2.filter(function (an) { return constants_1.cAnchorEdge.includes(an.position); });\r\n    if (anchorChoice2.length == 0)\r\n        anchorChoice2 = [{ position: 'auto' }];\r\n    //replace any 'auto' with ['left','right','bottom','top']\r\n    var autosAncs = anchorChoice2.filter(function (an) { return an.position === 'auto'; });\r\n    if (autosAncs.length > 0) {\r\n        anchorChoice2 = anchorChoice2.filter(function (an) { return an.position !== 'auto'; });\r\n        anchorChoice2.push.apply(anchorChoice2, autosAncs.flatMap(function (anchorObj) {\r\n            return ['left', 'right', 'top', 'bottom'].map(function (anchorName) {\r\n                return __assign(__assign({}, anchorObj), { position: anchorName });\r\n            });\r\n        }));\r\n    }\r\n    // default values\r\n    var anchorChoice3 = anchorChoice2.map(function (anchorChoice) {\r\n        if (typeof anchorChoice === 'object') {\r\n            var anchorChoiceCustom = anchorChoice;\r\n            if (!anchorChoiceCustom.position)\r\n                anchorChoiceCustom.position = 'auto';\r\n            if (!anchorChoiceCustom.offset)\r\n                anchorChoiceCustom.offset = { x: 0, y: 0 };\r\n            if (!anchorChoiceCustom.offset.y)\r\n                anchorChoiceCustom.offset.y = 0;\r\n            if (!anchorChoiceCustom.offset.x)\r\n                anchorChoiceCustom.offset.x = 0;\r\n            anchorChoiceCustom = anchorChoiceCustom;\r\n            return anchorChoiceCustom;\r\n        }\r\n        else\r\n            return anchorChoice;\r\n    });\r\n    return anchorChoice3;\r\n};\r\nvar parseDashness = function (dashness, props) {\r\n    var dashStroke = 0, dashNone = 0, animDashSpeed, animDirection = 1;\r\n    if (typeof dashness === 'object') {\r\n        dashStroke = dashness.strokeLen || props.strokeWidth * 2;\r\n        dashNone = dashness.strokeLen ? dashness.nonStrokeLen : props.strokeWidth;\r\n        animDashSpeed = dashness.animation ? dashness.animation : null;\r\n    }\r\n    else if (typeof dashness === 'boolean' && dashness) {\r\n        dashStroke = props.strokeWidth * 2;\r\n        dashNone = props.strokeWidth;\r\n        animDashSpeed = null;\r\n    }\r\n    return { strokeLen: dashStroke, nonStrokeLen: dashNone, animation: animDashSpeed, animDirection: animDirection };\r\n};\r\nvar parseEdgeShape = function (svgEdge) {\r\n    if (typeof svgEdge == 'string') {\r\n        if (svgEdge in constants_1.arrowShapes)\r\n            svgEdge = constants_1.arrowShapes[svgEdge];\r\n        else {\r\n            console.warn(\"'\" + svgEdge + \"' is not supported arrow shape. the supported arrow shapes is one of \" + constants_1.cArrowShapes + \".\\n           reverting to default shape.\");\r\n            svgEdge = constants_1.arrowShapes['arrow1'];\r\n        }\r\n    }\r\n    svgEdge = svgEdge;\r\n    if ((svgEdge === null || svgEdge === void 0 ? void 0 : svgEdge.offsetForward) === undefined)\r\n        svgEdge.offsetForward = 0.25;\r\n    if ((svgEdge === null || svgEdge === void 0 ? void 0 : svgEdge.svgElem) === undefined)\r\n        svgEdge.svgElem = 'path';\r\n    // if (svgEdge?.svgProps === undefined) svgEdge.svgProps = arrowShapes.arrow1.svgProps;\r\n    return svgEdge;\r\n};\r\nvar parseGridBreak = function (gridBreak) {\r\n    var resGridBreak = utils_1.xStr2absRelative(gridBreak);\r\n    if (!resGridBreak)\r\n        resGridBreak = { relative: 0.5, abs: 0 };\r\n    return resGridBreak;\r\n};\r\n/**\r\n * should be wrapped with any changed prop that is affecting the points path positioning\r\n * @param propVal\r\n * @param updateRef\r\n */\r\nvar withUpdate = function (propVal, updateRef) {\r\n    if (updateRef)\r\n        updateRef.current = true;\r\n    return propVal;\r\n};\r\nvar noParse = function (userProp) { return userProp; };\r\nvar noParseWithUpdatePos = function (userProp, _, updatePos) { return withUpdate(userProp, updatePos); };\r\nvar parseNumWithUpdatePos = function (userProp, _, updatePos) { return withUpdate(Number(userProp), updatePos); };\r\nvar parseNum = function (userProp) { return Number(userProp); };\r\nvar parsePropsFuncs = {\r\n    start: function (userProp) { return utils_1.getElementByPropGiven(userProp); },\r\n    end: function (userProp) { return utils_1.getElementByPropGiven(userProp); },\r\n    startAnchor: function (userProp, _, updatePos) { return withUpdate(parseAnchor(userProp), updatePos); },\r\n    endAnchor: function (userProp, _, updatePos) { return withUpdate(parseAnchor(userProp), updatePos); },\r\n    labels: function (userProp) { return parseLabels(userProp); },\r\n    color: noParse,\r\n    lineColor: function (userProp, propsRefs) { return userProp || propsRefs.color; },\r\n    headColor: function (userProp, propsRefs) { return userProp || propsRefs.color; },\r\n    tailColor: function (userProp, propsRefs) { return userProp || propsRefs.color; },\r\n    strokeWidth: parseNumWithUpdatePos,\r\n    showHead: noParseWithUpdatePos,\r\n    headSize: parseNumWithUpdatePos,\r\n    showTail: noParseWithUpdatePos,\r\n    tailSize: parseNumWithUpdatePos,\r\n    path: noParseWithUpdatePos,\r\n    curveness: parseNumWithUpdatePos,\r\n    gridBreak: function (userProp, _, updatePos) { return withUpdate(parseGridBreak(userProp), updatePos); },\r\n    // // gridRadius = strokeWidth * 2, //todo\r\n    dashness: function (userProp, propsRefs) { return parseDashness(userProp, propsRefs); },\r\n    headShape: function (userProp) { return parseEdgeShape(userProp); },\r\n    tailShape: function (userProp) { return parseEdgeShape(userProp); },\r\n    showXarrow: noParse,\r\n    animateDrawing: noParse,\r\n    zIndex: parseNum,\r\n    passProps: noParse,\r\n    arrowBodyProps: noParseWithUpdatePos,\r\n    arrowHeadProps: noParseWithUpdatePos,\r\n    arrowTailProps: noParseWithUpdatePos,\r\n    SVGcanvasProps: noParseWithUpdatePos,\r\n    divContainerProps: noParseWithUpdatePos,\r\n    divContainerStyle: noParseWithUpdatePos,\r\n    SVGcanvasStyle: noParseWithUpdatePos,\r\n    _extendSVGcanvas: noParseWithUpdatePos,\r\n    _debug: noParseWithUpdatePos,\r\n    _cpx1Offset: noParseWithUpdatePos,\r\n    _cpy1Offset: noParseWithUpdatePos,\r\n    _cpx2Offset: noParseWithUpdatePos,\r\n    _cpy2Offset: noParseWithUpdatePos,\r\n};\r\n//build dependencies\r\nvar propsDeps = {};\r\n//each prop depends on himself\r\nfor (var propName in parsePropsFuncs) {\r\n    propsDeps[propName] = [propName];\r\n}\r\n// 'lineColor', 'headColor', 'tailColor' props also depends on 'color' prop\r\nfor (var _i = 0, _a = ['lineColor', 'headColor', 'tailColor']; _i < _a.length; _i++) {\r\n    var propName = _a[_i];\r\n    propsDeps[propName].push('color');\r\n}\r\nvar parseGivenProps = function (props, propsRef) {\r\n    var _a;\r\n    for (var _i = 0, _b = Object.entries(props); _i < _b.length; _i++) {\r\n        var _c = _b[_i], name_1 = _c[0], val = _c[1];\r\n        propsRef[name_1] = (_a = parsePropsFuncs === null || parsePropsFuncs === void 0 ? void 0 : parsePropsFuncs[name_1]) === null || _a === void 0 ? void 0 : _a.call(parsePropsFuncs, val, propsRef);\r\n    }\r\n    return propsRef;\r\n};\r\nvar defaultProps = {\r\n    start: null,\r\n    end: null,\r\n    startAnchor: 'auto',\r\n    endAnchor: 'auto',\r\n    labels: null,\r\n    color: 'CornflowerBlue',\r\n    lineColor: null,\r\n    headColor: null,\r\n    tailColor: null,\r\n    strokeWidth: 4,\r\n    showHead: true,\r\n    headSize: 6,\r\n    showTail: false,\r\n    tailSize: 6,\r\n    path: 'smooth',\r\n    curveness: 0.8,\r\n    gridBreak: '50%',\r\n    // gridRadius : strokeWidth * 2, //todo\r\n    dashness: false,\r\n    headShape: 'arrow1',\r\n    tailShape: 'arrow1',\r\n    showXarrow: true,\r\n    animateDrawing: false,\r\n    zIndex: 0,\r\n    passProps: {},\r\n    arrowBodyProps: {},\r\n    arrowHeadProps: {},\r\n    arrowTailProps: {},\r\n    SVGcanvasProps: {},\r\n    divContainerProps: {},\r\n    divContainerStyle: {},\r\n    SVGcanvasStyle: {},\r\n    _extendSVGcanvas: 0,\r\n    _debug: false,\r\n    _cpx1Offset: 0,\r\n    _cpy1Offset: 0,\r\n    _cpx2Offset: 0,\r\n    _cpy2Offset: 0,\r\n};\r\nvar initialParsedProps = {};\r\ninitialParsedProps = parseGivenProps(defaultProps, initialParsedProps);\r\nvar initialValVars = {\r\n    startPos: { x: 0, y: 0, right: 0, bottom: 0 },\r\n    endPos: { x: 0, y: 0, right: 0, bottom: 0 },\r\n};\r\n// const parseAllProps = () => parseGivenProps(defaultProps, initialParsedProps);\r\nfunction deepCompareEquals(a, b) {\r\n    return lodash_1.default.isEqual(a, b);\r\n}\r\nfunction useDeepCompareMemoize(value) {\r\n    var ref = react_1.useRef();\r\n    // it can be done by using useMemo as well\r\n    // but useRef is rather cleaner and easier\r\n    if (!deepCompareEquals(value, ref.current)) {\r\n        ref.current = value;\r\n    }\r\n    return ref.current;\r\n}\r\nfunction useDeepCompareEffect(callback, dependencies) {\r\n    react_1.useLayoutEffect(callback, dependencies.map(useDeepCompareMemoize));\r\n}\r\n/**\r\n * smart hook that provides parsed props to Xarrow and will trigger rerender whenever given prop is changed.\r\n */\r\nvar useXarrowProps = function (userProps, refs) {\r\n    var _a = react_1.useState(initialParsedProps), propsRefs = _a[0], setPropsRefs = _a[1];\r\n    var shouldUpdatePosition = react_1.useRef(false);\r\n    // const _propsRefs = useRef(initialParsedProps);\r\n    // const propsRefs = _propsRefs.current;\r\n    propsRefs['shouldUpdatePosition'] = shouldUpdatePosition;\r\n    var curProps = __assign(__assign({}, defaultProps), userProps);\r\n    var _loop_1 = function (propName) {\r\n        react_1.useLayoutEffect(function () {\r\n            var _a;\r\n            propsRefs[propName] = (_a = parsePropsFuncs === null || parsePropsFuncs === void 0 ? void 0 : parsePropsFuncs[propName]) === null || _a === void 0 ? void 0 : _a.call(parsePropsFuncs, curProps[propName], propsRefs, shouldUpdatePosition);\r\n            // console.log('prop update:', propName, 'with value', propsRefs[propName]);\r\n            setPropsRefs(__assign({}, propsRefs));\r\n        }, propsDeps[propName].map(function (name) { return userProps[name]; }));\r\n    };\r\n    // react states the number of hooks per render must stay constant,\r\n    // this is ok we are using these hooks in a loop, because the number of props in defaultProps is constant,\r\n    // so the number of hook we will fire each render will always be the same.\r\n    // update the value of the ref that represents the corresponding prop\r\n    // for example: if given 'start' prop would change call getElementByPropGiven(props.start) and save value into propsRefs.start.current\r\n    // why to save refs to props parsed values? some of the props require relatively expensive computations(like 'start' and 'startAnchor').\r\n    // this will always run in the same order and THAT'S WAY ITS LEGAL\r\n    for (var propName in defaultProps) {\r\n        _loop_1(propName);\r\n    }\r\n    // rerender whenever position of start element or end element changes\r\n    var _b = react_1.useState(initialValVars), valVars = _b[0], setValVars = _b[1];\r\n    var startPos = utils_1.getElemPos(propsRefs.start);\r\n    useDeepCompareEffect(function () {\r\n        valVars.startPos = startPos;\r\n        shouldUpdatePosition.current = true;\r\n        setValVars(__assign({}, valVars));\r\n        // console.log('start update pos', startPos);\r\n    }, [startPos]);\r\n    var endPos = utils_1.getElemPos(propsRefs.end);\r\n    useDeepCompareEffect(function () {\r\n        valVars.endPos = endPos;\r\n        shouldUpdatePosition.current = true;\r\n        setValVars(__assign({}, valVars));\r\n        // console.log('end update pos', endPos);\r\n    }, [endPos]);\r\n    react_1.useLayoutEffect(function () {\r\n        // console.log('svg shape changed!');\r\n        shouldUpdatePosition.current = true;\r\n        setValVars(__assign({}, valVars));\r\n    }, [propsRefs.headShape.svgElem, propsRefs.tailShape.svgElem]);\r\n    return [propsRefs, valVars];\r\n};\r\nexports.default = useXarrowProps;\r\n\n\n/***/ }),\n\n/***/ \"./src/Xarrow/utils/GetPosition.tsx\":\n/*!******************************************!*\\\n  !*** ./src/Xarrow/utils/GetPosition.tsx ***!\n  \\******************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.getPosition = void 0;\r\nvar anchors_1 = __webpack_require__(/*! ../anchors */ \"./src/Xarrow/anchors.ts\");\r\nvar index_1 = __webpack_require__(/*! ./index */ \"./src/Xarrow/utils/index.ts\");\r\nvar lodash_1 = __importDefault(__webpack_require__(/*! lodash */ \"lodash\"));\r\nvar constants_1 = __webpack_require__(/*! ../../constants */ \"./src/constants.tsx\");\r\nvar buzzier_1 = __webpack_require__(/*! ./buzzier */ \"./src/Xarrow/utils/buzzier.js\");\r\n/**\r\n * The Main logic of path calculation for the arrow.\r\n * calculate new path, adjusting canvas, and set state based on given properties.\r\n * */\r\nvar getPosition = function (xProps, mainRef) {\r\n    var _a, _b;\r\n    var _c, _d;\r\n    var propsRefs = xProps[0], valVars = xProps[1];\r\n    var startAnchor = propsRefs.startAnchor, endAnchor = propsRefs.endAnchor, strokeWidth = propsRefs.strokeWidth, showHead = propsRefs.showHead, headSize = propsRefs.headSize, showTail = propsRefs.showTail, tailSize = propsRefs.tailSize, path = propsRefs.path, curveness = propsRefs.curveness, gridBreak = propsRefs.gridBreak, headShape = propsRefs.headShape, tailShape = propsRefs.tailShape, _extendSVGcanvas = propsRefs._extendSVGcanvas, _cpx1Offset = propsRefs._cpx1Offset, _cpy1Offset = propsRefs._cpy1Offset, _cpx2Offset = propsRefs._cpx2Offset, _cpy2Offset = propsRefs._cpy2Offset;\r\n    var startPos = valVars.startPos, endPos = valVars.endPos;\r\n    var _e = mainRef.current, svgRef = _e.svgRef, lineRef = _e.lineRef;\r\n    var headOrient = 0;\r\n    var tailOrient = 0;\r\n    // convert startAnchor and endAnchor to list of objects represents allowed anchors.\r\n    var startPoints = anchors_1.calcAnchors(startAnchor, startPos);\r\n    var endPoints = anchors_1.calcAnchors(endAnchor, endPos);\r\n    // choose the smallest path for 2 points from these possibilities.\r\n    var _f = index_1.getShortestLine(startPoints, endPoints), chosenStart = _f.chosenStart, chosenEnd = _f.chosenEnd;\r\n    var startAnchorPosition = chosenStart.anchor.position, endAnchorPosition = chosenEnd.anchor.position;\r\n    var startPoint = lodash_1.default.pick(chosenStart, ['x', 'y']), endPoint = lodash_1.default.pick(chosenEnd, ['x', 'y']);\r\n    var mainDivPos = index_1.getSvgPos(svgRef);\r\n    var cx0 = Math.min(startPoint.x, endPoint.x) - mainDivPos.x;\r\n    var cy0 = Math.min(startPoint.y, endPoint.y) - mainDivPos.y;\r\n    var dx = endPoint.x - startPoint.x;\r\n    var dy = endPoint.y - startPoint.y;\r\n    var absDx = Math.abs(endPoint.x - startPoint.x);\r\n    var absDy = Math.abs(endPoint.y - startPoint.y);\r\n    var xSign = dx > 0 ? 1 : -1;\r\n    var ySign = dy > 0 ? 1 : -1;\r\n    var _g = [headShape.offsetForward, tailShape.offsetForward], headOffset = _g[0], tailOffset = _g[1];\r\n    var fHeadSize = headSize * strokeWidth; //factored head size\r\n    var fTailSize = tailSize * strokeWidth; //factored head size\r\n    // const { current: _headBox } = headBox;\r\n    var xHeadOffset = 0;\r\n    var yHeadOffset = 0;\r\n    var xTailOffset = 0;\r\n    var yTailOffset = 0;\r\n    var _headOffset = fHeadSize * headOffset;\r\n    var _tailOffset = fTailSize * tailOffset;\r\n    var cu = Number(curveness);\r\n    // gridRadius = Number(gridRadius);\r\n    if (!constants_1.cPaths.includes(path))\r\n        path = 'smooth';\r\n    if (path === 'straight') {\r\n        cu = 0;\r\n        path = 'smooth';\r\n    }\r\n    var biggerSide = headSize > tailSize ? headSize : tailSize;\r\n    var _calc = strokeWidth + (strokeWidth * biggerSide) / 2;\r\n    var excRight = _calc;\r\n    var excLeft = _calc;\r\n    var excUp = _calc;\r\n    var excDown = _calc;\r\n    excLeft += Number(_extendSVGcanvas);\r\n    excRight += Number(_extendSVGcanvas);\r\n    excUp += Number(_extendSVGcanvas);\r\n    excDown += Number(_extendSVGcanvas);\r\n    ////////////////////////////////////\r\n    // arrow point to point calculations\r\n    var x1 = 0, x2 = absDx, y1 = 0, y2 = absDy;\r\n    if (dx < 0)\r\n        _a = [x2, x1], x1 = _a[0], x2 = _a[1];\r\n    if (dy < 0)\r\n        _b = [y2, y1], y1 = _b[0], y2 = _b[1];\r\n    ////////////////////////////////////\r\n    // arrow curviness and arrowhead placement calculations\r\n    if (cu === 0) {\r\n        // in case of straight path\r\n        var headAngel = Math.atan(absDy / absDx);\r\n        if (showHead) {\r\n            x2 -= fHeadSize * (1 - headOffset) * xSign * Math.cos(headAngel);\r\n            y2 -= fHeadSize * (1 - headOffset) * ySign * Math.sin(headAngel);\r\n            headAngel *= ySign;\r\n            if (xSign < 0)\r\n                headAngel = (Math.PI - headAngel * xSign) * xSign;\r\n            xHeadOffset = Math.cos(headAngel) * _headOffset - (Math.sin(headAngel) * fHeadSize) / 2;\r\n            yHeadOffset = (Math.cos(headAngel) * fHeadSize) / 2 + Math.sin(headAngel) * _headOffset;\r\n            headOrient = (headAngel * 180) / Math.PI;\r\n        }\r\n        var tailAngel = Math.atan(absDy / absDx);\r\n        if (showTail) {\r\n            x1 += fTailSize * (1 - tailOffset) * xSign * Math.cos(tailAngel);\r\n            y1 += fTailSize * (1 - tailOffset) * ySign * Math.sin(tailAngel);\r\n            tailAngel *= -ySign;\r\n            if (xSign > 0)\r\n                tailAngel = (Math.PI - tailAngel * xSign) * xSign;\r\n            xTailOffset = Math.cos(tailAngel) * _tailOffset - (Math.sin(tailAngel) * fTailSize) / 2;\r\n            yTailOffset = (Math.cos(tailAngel) * fTailSize) / 2 + Math.sin(tailAngel) * _tailOffset;\r\n            tailOrient = (tailAngel * 180) / Math.PI;\r\n        }\r\n    }\r\n    else {\r\n        // in case of smooth path\r\n        if (endAnchorPosition === 'middle') {\r\n            // in case a middle anchor is chosen for endAnchor choose from which side to attach to the middle of the element\r\n            if (absDx > absDy) {\r\n                endAnchorPosition = xSign ? 'left' : 'right';\r\n            }\r\n            else {\r\n                endAnchorPosition = ySign ? 'top' : 'bottom';\r\n            }\r\n        }\r\n        if (showHead) {\r\n            if (['left', 'right'].includes(endAnchorPosition)) {\r\n                xHeadOffset += _headOffset * xSign;\r\n                x2 -= fHeadSize * (1 - headOffset) * xSign; //same!\r\n                yHeadOffset += (fHeadSize * xSign) / 2;\r\n                if (endAnchorPosition === 'left') {\r\n                    headOrient = 0;\r\n                    if (xSign < 0)\r\n                        headOrient += 180;\r\n                }\r\n                else {\r\n                    headOrient = 180;\r\n                    if (xSign > 0)\r\n                        headOrient += 180;\r\n                }\r\n            }\r\n            else if (['top', 'bottom'].includes(endAnchorPosition)) {\r\n                xHeadOffset += (fHeadSize * -ySign) / 2;\r\n                yHeadOffset += _headOffset * ySign;\r\n                y2 -= fHeadSize * ySign - yHeadOffset;\r\n                if (endAnchorPosition === 'top') {\r\n                    headOrient = 270;\r\n                    if (ySign > 0)\r\n                        headOrient += 180;\r\n                }\r\n                else {\r\n                    headOrient = 90;\r\n                    if (ySign < 0)\r\n                        headOrient += 180;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (showTail && cu !== 0) {\r\n        if (['left', 'right'].includes(startAnchorPosition)) {\r\n            xTailOffset += _tailOffset * -xSign;\r\n            x1 += fTailSize * xSign + xTailOffset;\r\n            yTailOffset += -(fTailSize * xSign) / 2;\r\n            if (startAnchorPosition === 'left') {\r\n                tailOrient = 180;\r\n                if (xSign < 0)\r\n                    tailOrient += 180;\r\n            }\r\n            else {\r\n                tailOrient = 0;\r\n                if (xSign > 0)\r\n                    tailOrient += 180;\r\n            }\r\n        }\r\n        else if (['top', 'bottom'].includes(startAnchorPosition)) {\r\n            yTailOffset += _tailOffset * -ySign;\r\n            y1 += fTailSize * ySign + yTailOffset;\r\n            xTailOffset += (fTailSize * ySign) / 2;\r\n            if (startAnchorPosition === 'top') {\r\n                tailOrient = 90;\r\n                if (ySign > 0)\r\n                    tailOrient += 180;\r\n            }\r\n            else {\r\n                tailOrient = 270;\r\n                if (ySign < 0)\r\n                    tailOrient += 180;\r\n            }\r\n        }\r\n    }\r\n    var arrowHeadOffset = { x: xHeadOffset, y: yHeadOffset };\r\n    var arrowTailOffset = { x: xTailOffset, y: yTailOffset };\r\n    var cpx1 = x1, cpy1 = y1, cpx2 = x2, cpy2 = y2;\r\n    var curvesPossibilities = {};\r\n    if (path === 'smooth')\r\n        curvesPossibilities = {\r\n            hh: function () {\r\n                //horizontal - from right to left or the opposite\r\n                cpx1 += absDx * cu * xSign;\r\n                cpx2 -= absDx * cu * xSign;\r\n            },\r\n            vv: function () {\r\n                //vertical - from top to bottom or opposite\r\n                cpy1 += absDy * cu * ySign;\r\n                cpy2 -= absDy * cu * ySign;\r\n            },\r\n            hv: function () {\r\n                // start horizontally then vertically\r\n                // from v side to h side\r\n                cpx1 += absDx * cu * xSign;\r\n                cpy2 -= absDy * cu * ySign;\r\n            },\r\n            vh: function () {\r\n                // start vertically then horizontally\r\n                // from h side to v side\r\n                cpy1 += absDy * cu * ySign;\r\n                cpx2 -= absDx * cu * xSign;\r\n            },\r\n        };\r\n    else if (path === 'grid') {\r\n        curvesPossibilities = {\r\n            hh: function () {\r\n                cpx1 += (absDx * gridBreak.relative + gridBreak.abs) * xSign;\r\n                cpx2 -= (absDx * (1 - gridBreak.relative) - gridBreak.abs) * xSign;\r\n                if (showHead) {\r\n                    cpx1 -= ((fHeadSize * (1 - headOffset)) / 2) * xSign;\r\n                    cpx2 += ((fHeadSize * (1 - headOffset)) / 2) * xSign;\r\n                }\r\n                if (showTail) {\r\n                    cpx1 -= ((fTailSize * (1 - tailOffset)) / 2) * xSign;\r\n                    cpx2 += ((fTailSize * (1 - tailOffset)) / 2) * xSign;\r\n                }\r\n            },\r\n            vv: function () {\r\n                cpy1 += (absDy * gridBreak.relative + gridBreak.abs) * ySign;\r\n                cpy2 -= (absDy * (1 - gridBreak.relative) - gridBreak.abs) * ySign;\r\n                if (showHead) {\r\n                    cpy1 -= ((fHeadSize * (1 - headOffset)) / 2) * ySign;\r\n                    cpy2 += ((fHeadSize * (1 - headOffset)) / 2) * ySign;\r\n                }\r\n                if (showTail) {\r\n                    cpy1 -= ((fTailSize * (1 - tailOffset)) / 2) * ySign;\r\n                    cpy2 += ((fTailSize * (1 - tailOffset)) / 2) * ySign;\r\n                }\r\n            },\r\n            hv: function () {\r\n                cpx1 = x2;\r\n            },\r\n            vh: function () {\r\n                cpy1 = y2;\r\n            },\r\n        };\r\n    }\r\n    // smart select best curve for the current anchors\r\n    var selectedCurviness = '';\r\n    if (['left', 'right'].includes(startAnchorPosition))\r\n        selectedCurviness += 'h';\r\n    else if (['bottom', 'top'].includes(startAnchorPosition))\r\n        selectedCurviness += 'v';\r\n    else if (startAnchorPosition === 'middle')\r\n        selectedCurviness += 'm';\r\n    if (['left', 'right'].includes(endAnchorPosition))\r\n        selectedCurviness += 'h';\r\n    else if (['bottom', 'top'].includes(endAnchorPosition))\r\n        selectedCurviness += 'v';\r\n    else if (endAnchorPosition === 'middle')\r\n        selectedCurviness += 'm';\r\n    if (absDx > absDy)\r\n        selectedCurviness = selectedCurviness.replace(/m/g, 'h');\r\n    else\r\n        selectedCurviness = selectedCurviness.replace(/m/g, 'v');\r\n    curvesPossibilities[selectedCurviness]();\r\n    cpx1 += _cpx1Offset;\r\n    cpy1 += _cpy1Offset;\r\n    cpx2 += _cpx2Offset;\r\n    cpy2 += _cpy2Offset;\r\n    ////////////////////////////////////\r\n    // canvas smart size adjustments\r\n    var _h = buzzier_1.buzzierMinSols(x1, cpx1, cpx2, x2), xSol1 = _h[0], xSol2 = _h[1];\r\n    var _j = buzzier_1.buzzierMinSols(y1, cpy1, cpy2, y2), ySol1 = _j[0], ySol2 = _j[1];\r\n    if (xSol1 < 0)\r\n        excLeft += -xSol1;\r\n    if (xSol2 > absDx)\r\n        excRight += xSol2 - absDx;\r\n    if (ySol1 < 0)\r\n        excUp += -ySol1;\r\n    if (ySol2 > absDy)\r\n        excDown += ySol2 - absDy;\r\n    if (path === 'grid') {\r\n        excLeft += _calc;\r\n        excRight += _calc;\r\n        excUp += _calc;\r\n        excDown += _calc;\r\n    }\r\n    x1 += excLeft;\r\n    x2 += excLeft;\r\n    y1 += excUp;\r\n    y2 += excUp;\r\n    cpx1 += excLeft;\r\n    cpx2 += excLeft;\r\n    cpy1 += excUp;\r\n    cpy2 += excUp;\r\n    var cw = absDx + excLeft + excRight, ch = absDy + excUp + excDown;\r\n    cx0 -= excLeft;\r\n    cy0 -= excUp;\r\n    //labels\r\n    var bzx = buzzier_1.bzFunction(x1, cpx1, cpx2, x2);\r\n    var bzy = buzzier_1.bzFunction(y1, cpy1, cpy2, y2);\r\n    var labelStartPos = { x: bzx(0.01), y: bzy(0.01) };\r\n    var labelMiddlePos = { x: bzx(0.5), y: bzy(0.5) };\r\n    var labelEndPos = { x: bzx(0.99), y: bzy(0.99) };\r\n    var arrowPath;\r\n    if (path === 'grid') {\r\n        // todo: support gridRadius\r\n        //  arrowPath = `M ${x1} ${y1} L  ${cpx1 - 10} ${cpy1} a10,10 0 0 1 10,10\r\n        // L ${cpx2} ${cpy2 - 10} a10,10 0 0 0 10,10 L  ${x2} ${y2}`;\r\n        arrowPath = \"M \" + x1 + \" \" + y1 + \" L  \" + cpx1 + \" \" + cpy1 + \" L \" + cpx2 + \" \" + cpy2 + \" \" + x2 + \" \" + y2;\r\n    }\r\n    else if (path === 'smooth')\r\n        arrowPath = \"M \" + x1 + \" \" + y1 + \" C \" + cpx1 + \" \" + cpy1 + \", \" + cpx2 + \" \" + cpy2 + \", \" + x2 + \" \" + y2;\r\n    return {\r\n        cx0: cx0,\r\n        cy0: cy0,\r\n        x1: x1,\r\n        x2: x2,\r\n        y1: y1,\r\n        y2: y2,\r\n        cw: cw,\r\n        ch: ch,\r\n        cpx1: cpx1,\r\n        cpy1: cpy1,\r\n        cpx2: cpx2,\r\n        cpy2: cpy2,\r\n        dx: dx,\r\n        dy: dy,\r\n        absDx: absDx,\r\n        absDy: absDy,\r\n        headOrient: headOrient,\r\n        tailOrient: tailOrient,\r\n        labelStartPos: labelStartPos,\r\n        labelMiddlePos: labelMiddlePos,\r\n        labelEndPos: labelEndPos,\r\n        excLeft: excLeft,\r\n        excRight: excRight,\r\n        excUp: excUp,\r\n        excDown: excDown,\r\n        headOffset: _headOffset,\r\n        arrowHeadOffset: arrowHeadOffset,\r\n        arrowTailOffset: arrowTailOffset,\r\n        startPoints: startPoints,\r\n        endPoints: endPoints,\r\n        mainDivPos: mainDivPos,\r\n        xSign: xSign,\r\n        ySign: ySign,\r\n        lineLength: (_d = (_c = lineRef.current) === null || _c === void 0 ? void 0 : _c.getTotalLength()) !== null && _d !== void 0 ? _d : 0,\r\n        fHeadSize: fHeadSize,\r\n        fTailSize: fTailSize,\r\n        arrowPath: arrowPath,\r\n    };\r\n};\r\nexports.getPosition = getPosition;\r\n\n\n/***/ }),\n\n/***/ \"./src/Xarrow/utils/index.ts\":\n/*!***********************************!*\\\n  !*** ./src/Xarrow/utils/index.ts ***!\n  \\***********************************/\n/***/ (function(__unused_webpack_module, exports) {\n\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.getSvgPos = exports.getElemPos = exports.getShortestLine = exports.xStr2absRelative = exports.factorDpathStr = exports.getElementByPropGiven = void 0;\r\nvar getElementByPropGiven = function (ref) {\r\n    var myRef;\r\n    if (typeof ref === 'string') {\r\n        // myRef = document.getElementById(ref);\r\n        myRef = document.getElementById(ref);\r\n    }\r\n    else\r\n        myRef = ref === null || ref === void 0 ? void 0 : ref.current;\r\n    return myRef;\r\n};\r\nexports.getElementByPropGiven = getElementByPropGiven;\r\n// receives string representing a d path and factoring only the numbers\r\nvar factorDpathStr = function (d, factor) {\r\n    var l = d.split(/(\\d+(?:\\.\\d+)?)/);\r\n    l = l.map(function (s) {\r\n        if (Number(s))\r\n            return (Number(s) * factor).toString();\r\n        else\r\n            return s;\r\n    });\r\n    return l.join('');\r\n};\r\nexports.factorDpathStr = factorDpathStr;\r\n// return relative,abs\r\nvar xStr2absRelative = function (str) {\r\n    if (typeof str !== 'string')\r\n        return { abs: 0, relative: 0.5 };\r\n    var sp = str.split('%');\r\n    var absLen = 0, percentLen = 0;\r\n    if (sp.length == 1) {\r\n        var p = parseFloat(sp[0]);\r\n        if (!isNaN(p)) {\r\n            absLen = p;\r\n            return { abs: absLen, relative: 0 };\r\n        }\r\n    }\r\n    else if (sp.length == 2) {\r\n        var _a = [parseFloat(sp[0]), parseFloat(sp[1])], p1 = _a[0], p2 = _a[1];\r\n        if (!isNaN(p1))\r\n            percentLen = p1 / 100;\r\n        if (!isNaN(p2))\r\n            absLen = p2;\r\n        if (!isNaN(p1) || !isNaN(p2))\r\n            return { abs: absLen, relative: percentLen };\r\n    }\r\n};\r\nexports.xStr2absRelative = xStr2absRelative;\r\nvar dist = function (p1, p2) {\r\n    //length of line\r\n    return Math.sqrt(Math.pow((p1.x - p2.x), 2) + Math.pow((p1.y - p2.y), 2));\r\n};\r\nvar getShortestLine = function (sPoints, ePoints) {\r\n    // closes tPair Of Points which feet to the specified anchors\r\n    var minDist = Infinity, d = Infinity;\r\n    var closestPair;\r\n    sPoints.forEach(function (sp) {\r\n        ePoints.forEach(function (ep) {\r\n            d = dist(sp, ep);\r\n            if (d < minDist) {\r\n                minDist = d;\r\n                closestPair = { chosenStart: sp, chosenEnd: ep };\r\n            }\r\n        });\r\n    });\r\n    return closestPair;\r\n};\r\nexports.getShortestLine = getShortestLine;\r\nvar getElemPos = function (elem) {\r\n    if (!elem)\r\n        return { x: 0, y: 0, right: 0, bottom: 0 };\r\n    var pos = elem.getBoundingClientRect();\r\n    return {\r\n        x: pos.left,\r\n        y: pos.top,\r\n        right: pos.right,\r\n        bottom: pos.bottom,\r\n    };\r\n};\r\nexports.getElemPos = getElemPos;\r\nvar getSvgPos = function (svgRef) {\r\n    if (!svgRef.current)\r\n        return { x: 0, y: 0 };\r\n    var _a = svgRef.current.getBoundingClientRect(), xarrowElemX = _a.left, xarrowElemY = _a.top;\r\n    var xarrowStyle = getComputedStyle(svgRef.current);\r\n    var xarrowStyleLeft = Number(xarrowStyle.left.slice(0, -2));\r\n    var xarrowStyleTop = Number(xarrowStyle.top.slice(0, -2));\r\n    return {\r\n        x: xarrowElemX - xarrowStyleLeft,\r\n        y: xarrowElemY - xarrowStyleTop,\r\n    };\r\n};\r\nexports.getSvgPos = getSvgPos;\r\n\n\n/***/ }),\n\n/***/ \"./src/Xwrapper.tsx\":\n/*!**************************!*\\\n  !*** ./src/Xwrapper.tsx ***!\n  \\**************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.XarrowContext = exports.XelemContext = void 0;\r\nvar react_1 = __importStar(__webpack_require__(/*! react */ \"react\"));\r\nexports.XelemContext = react_1.default.createContext(null);\r\nexports.XarrowContext = react_1.default.createContext(null);\r\nvar updateRef = {};\r\nvar updateRefCount = 0;\r\nvar log = console.log;\r\nvar XarrowProvider = function (_a) {\r\n    var children = _a.children, instanceCount = _a.instanceCount;\r\n    var _b = react_1.useState({}), setRender = _b[1];\r\n    var updateXarrow = function () { return setRender({}); };\r\n    react_1.useEffect(function () {\r\n        instanceCount.current = updateRefCount; // so this instance would know what is id\r\n        updateRef[instanceCount.current] = updateXarrow;\r\n    }, []);\r\n    // log('XarrowProvider', updateRefCount);\r\n    return react_1.default.createElement(exports.XarrowContext.Provider, { value: updateXarrow }, children);\r\n};\r\nvar XelemProvider = function (_a) {\r\n    var children = _a.children, instanceCount = _a.instanceCount;\r\n    return react_1.default.createElement(exports.XelemContext.Provider, { value: updateRef[instanceCount.current] }, children);\r\n};\r\nvar Xwrapper = function (_a) {\r\n    var children = _a.children;\r\n    var instanceCount = react_1.useRef(updateRefCount);\r\n    var _b = react_1.useState({}), setRender = _b[1];\r\n    react_1.useEffect(function () {\r\n        updateRefCount++;\r\n        setRender({});\r\n        return function () {\r\n            delete updateRef[instanceCount.current];\r\n        };\r\n    }, []);\r\n    return (react_1.default.createElement(XelemProvider, { instanceCount: instanceCount },\r\n        react_1.default.createElement(XarrowProvider, { instanceCount: instanceCount }, children)));\r\n};\r\nexports.default = Xwrapper;\r\n\n\n/***/ }),\n\n/***/ \"./src/constants.tsx\":\n/*!***************************!*\\\n  !*** ./src/constants.tsx ***!\n  \\***************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.cArrowShapes = exports.arrowShapes = exports.cSvgElems = exports.cPaths = exports.cAnchorEdge = void 0;\r\n// constants used for typescript and proptypes definitions\r\nvar react_1 = __importDefault(__webpack_require__(/*! react */ \"react\"));\r\nexports.cAnchorEdge = ['middle', 'left', 'right', 'top', 'bottom', 'auto'];\r\nexports.cPaths = ['smooth', 'grid', 'straight'];\r\nexports.cSvgElems = ['circle', 'ellipse', 'line', 'path', 'polygon', 'polyline', 'rect'];\r\n//default arrows svgs\r\nexports.arrowShapes = {\r\n    arrow1: { svgElem: react_1.default.createElement(\"path\", { d: \"M 0 0 L 1 0.5 L 0 1 L 0.25 0.5 z\" }), offsetForward: 0.25 },\r\n    heart: {\r\n        svgElem: (react_1.default.createElement(\"path\", { d: \"M 0,0.25 A 0.125,0.125 0,0,1 0.5,0.25 A 0.125,0.125 0,0,1 1,0.25 Q 1,0.625 0.5,1 Q 0,0.625 0,0.25 z\" })),\r\n        offsetForward: 0.1,\r\n    },\r\n    circle: {\r\n        svgElem: react_1.default.createElement(\"circle\", { r: 0.5, cx: 0.5, cy: 0.5 }),\r\n        offsetForward: 0,\r\n    },\r\n};\r\nexports.cArrowShapes = Object.keys(exports.arrowShapes);\r\n\n\n/***/ }),\n\n/***/ \"./src/index.tsx\":\n/*!***********************!*\\\n  !*** ./src/index.tsx ***!\n  \\***********************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.useXarrow = exports.Xwrapper = exports.default = void 0;\r\nvar Xarrow_1 = __webpack_require__(/*! ./Xarrow/Xarrow */ \"./src/Xarrow/Xarrow.tsx\");\r\nObject.defineProperty(exports, \"default\", ({ enumerable: true, get: function () { return __importDefault(Xarrow_1).default; } }));\r\n__exportStar(__webpack_require__(/*! ./types */ \"./src/types.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./constants */ \"./src/constants.tsx\"), exports);\r\nvar Xwrapper_1 = __webpack_require__(/*! ./Xwrapper */ \"./src/Xwrapper.tsx\");\r\nObject.defineProperty(exports, \"Xwrapper\", ({ enumerable: true, get: function () { return __importDefault(Xwrapper_1).default; } }));\r\nvar useXarrow_1 = __webpack_require__(/*! ./useXarrow */ \"./src/useXarrow.tsx\");\r\nObject.defineProperty(exports, \"useXarrow\", ({ enumerable: true, get: function () { return __importDefault(useXarrow_1).default; } }));\r\n\n\n/***/ }),\n\n/***/ \"./src/types.ts\":\n/*!**********************!*\\\n  !*** ./src/types.ts ***!\n  \\**********************/\n/***/ (function(__unused_webpack_module, exports) {\n\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\n\n\n/***/ }),\n\n/***/ \"./src/useXarrow.tsx\":\n/*!***************************!*\\\n  !*** ./src/useXarrow.tsx ***!\n  \\***************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nvar react_1 = __webpack_require__(/*! react */ \"react\");\r\nvar Xwrapper_1 = __webpack_require__(/*! ./Xwrapper */ \"./src/Xwrapper.tsx\");\r\nvar useXarrow = function () {\r\n    var _a = react_1.useState({}), setRender = _a[1];\r\n    var reRender = function () { return setRender({}); };\r\n    var updateXarrow = react_1.useContext(Xwrapper_1.XelemContext);\r\n    if (!updateXarrow)\r\n        updateXarrow = function () { };\r\n    // throw new Error(\r\n    //   \"'Xwrapper' is required around element using 'useXarrow' hook! wrap your xarrows and connected elements with Xwrapper! \"\r\n    // );\r\n    react_1.useLayoutEffect(function () {\r\n        updateXarrow();\r\n    });\r\n    return reRender;\r\n};\r\nexports.default = useXarrow;\r\n\n\n/***/ }),\n\n/***/ \"lodash\":\n/*!*************************!*\\\n  !*** external \"lodash\" ***!\n  \\*************************/\n/***/ (function(module) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_lodash__;\n\n/***/ }),\n\n/***/ \"prop-types\":\n/*!*****************************!*\\\n  !*** external \"prop-types\" ***!\n  \\*****************************/\n/***/ (function(module) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_prop_types__;\n\n/***/ }),\n\n/***/ \"react\":\n/*!************************!*\\\n  !*** external \"react\" ***!\n  \\************************/\n/***/ (function(module) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_react__;\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = __webpack_module_cache__;\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t!function() {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = function(exports, definition) {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t!function() {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = function(exports) {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/node module decorator */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.nmd = function(module) {\n/******/ \t\t\tmodule.paths = [];\n/******/ \t\t\tif (!module.children) module.children = [];\n/******/ \t\t\treturn module;\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// module cache are used so entry inlining is disabled\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \tvar __webpack_exports__ = __webpack_require__(__webpack_require__.s = \"./src/index.tsx\");\n/******/ \t\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});"]},"metadata":{},"sourceType":"script"}