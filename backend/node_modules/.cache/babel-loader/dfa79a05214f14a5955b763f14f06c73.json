{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yonil\\\\my-app\\\\src\\\\pages\\\\test\\\\ReactFileUpload.jsx\";\nimport React, { Component } from 'react';\nimport AuthenticationService from '@services/AuthenticationService.js';\nimport UserDataService from '@api/user/UserDataService.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass ReactFileUpload extends Component {\n  constructor(props) {\n    super(props);\n\n    this.refresh = () => {\n      UserDataService.get(this.state.id).then(response => {\n        this.setState({\n          id: response.data.id,\n          username: response.data.username,\n          gender: response.data.gender,\n          date: moment(response.data.date).format('YYYY-MM-DD'),\n          phone: response.data.phone,\n          email: response.data.email,\n          description: response.data.description\n        });\n      });\n    };\n\n    this.state = {\n      file: null,\n      image: null\n    };\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.fileUpload = this.fileUpload.bind(this);\n    this.getImage = this.getImage.bind(this);\n  }\n\n  componentDidMount() {\n    this.refresh();\n  }\n\n  onFormSubmit(e) {\n    e.preventDefault(); // Stop form submit\n\n    this.fileUpload(this.state.file);\n  }\n\n  onChange(e) {\n    this.setState({\n      file: e.target.files[0]\n    });\n  }\n\n  async fileUpload(file) {\n    const formData = new FormData();\n    formData.append('image', file);\n    await UserDataService.uploadImage(1, formData);\n  }\n\n  async getImage() {\n    console.log(\"getImage\");\n    const res = await UserDataService.getImage(1);\n    this.setState({\n      image: res.data.content\n    });\n  }\n\n  render() {\n    const data = this.state.image;\n    console.log(\"render data: \" + data);\n\n    const Example = ({\n      data\n    }) => /*#__PURE__*/_jsxDEV(\"img\", {\n      src: `data:image/jpeg;base64,${data}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 35\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Example, {\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.onFormSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"File Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: this.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          as: \"input\",\n          type: \"submit\",\n          children: \"Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default ReactFileUpload; // const config = {\n//     headers: {\n//         'content-type': 'multipart/form-data',          \n//     }          \n// }","map":{"version":3,"sources":["C:/Users/yonil/my-app/src/pages/test/ReactFileUpload.jsx"],"names":["React","Component","AuthenticationService","UserDataService","ReactFileUpload","constructor","props","refresh","get","state","id","then","response","setState","data","username","gender","date","moment","format","phone","email","description","file","image","onFormSubmit","bind","onChange","fileUpload","getImage","componentDidMount","e","preventDefault","target","files","formData","FormData","append","uploadImage","console","log","res","content","render","Example"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport AuthenticationService from '@services/AuthenticationService.js'\r\nimport UserDataService from '@api/user/UserDataService.js'\r\n\r\nclass ReactFileUpload extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state ={\r\n      file:null,\r\n      image: null\r\n\r\n    }\r\n    this.onFormSubmit = this.onFormSubmit.bind(this)\r\n    this.onChange = this.onChange.bind(this)\r\n    this.fileUpload = this.fileUpload.bind(this)\r\n    this.getImage  = this.getImage.bind(this)\r\n  }\r\n\r\n  \r\n  componentDidMount(){\r\n    this.refresh()\r\n}\r\n\r\nrefresh = ()=>{\r\n    UserDataService.get(this.state.id)\r\n    .then( (response) =>{\r\n        this.setState({\r\n            id: response.data.id,\r\n            username: response.data.username,\r\n            gender: response.data.gender, \r\n            date:   moment(response.data.date).format('YYYY-MM-DD'),\r\n            phone:  response.data.phone, \r\n            email:  response.data.email, \r\n            description: response.data.description,\r\n        })\r\n    } )\r\n}\r\n\r\n  onFormSubmit(e){\r\n    e.preventDefault() // Stop form submit\r\n    this.fileUpload(this.state.file); \r\n  }\r\n\r\n  onChange(e) {\r\n    this.setState({file:e.target.files[0]})\r\n  }\r\n\r\n  async fileUpload(file){\r\n    const formData = new FormData();\r\n    formData.append('image',file)\r\n    await UserDataService.uploadImage(1,formData)\r\n  }\r\n\r\n   async getImage(){\r\n    console.log(\"getImage\")\r\n    const res = await UserDataService.getImage(1)\r\n    this.setState({image: res.data.content});       \r\n  }\r\n\r\n  render() {\r\n\r\n    const data = this.state.image\r\n\r\n    console.log(\"render data: \" + data)\r\n\r\n    const Example = ({ data }) => <img src={`data:image/jpeg;base64,${data}`} />\r\n\r\n    return (\r\n\r\n      <>\r\n             <Example data={data} />\r\n        \r\n              <form onSubmit={this.onFormSubmit}>\r\n                <h1>File Upload</h1>\r\n                <input type=\"file\" onChange={this.onChange} />\r\n                <button as=\"input\" type=\"submit\">Upload</button>\r\n              </form>\r\n        \r\n      </>\r\n   )\r\n  }\r\n}\r\n\r\nexport default ReactFileUpload\r\n\r\n\r\n    // const config = {\r\n    //     headers: {\r\n    //         'content-type': 'multipart/form-data',          \r\n    //     }          \r\n    // }\r\n"]},"metadata":{},"sourceType":"module"}